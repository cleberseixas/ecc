<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:ui="http://java.sun.com/jsf/facelets">

<h:head>
	<title>ECC-SLG</title>
	<link rel="shortcut icon" href="../resources/imagens/SLG.ico" />
	<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" />
	<h:outputScript library="js" name="locale-primefaces.js" />
	<h:outputScript library="js" name="bootstrap.min.js" />

	<h:outputStylesheet library="css" name="modelo.css" />
	<h:outputStylesheet library="css" name="menu.css" />
	<h:outputStylesheet library="css" name="AdminLTE.css" />
	<h:outputStylesheet library="css" name="font-awesome.min.css" />
</h:head>

<h:body style="background-color:#EBF3FE">
	<f:metadata>
		<f:viewAction action="#{fichaBean.verificaSO()}"/>
	</f:metadata>
	<h:form id="listagemFichas">
		<div id="menubar">
			<li class="icone"><h:graphicImage library="imagens" name="logo_ECC.png" width="400" height="72" /></li>
			<ul>
				<!--
				<li>
					<a><h:graphicImage library="imagens/menu"
									   style="width:35px; height:35px;" name="cadastros.png" />Cadastros</a>
					<ul>
						<li><h:graphicImage library="imagens/menu"
											style="width:30px; height:30px;
								margin-left:10px; margin-top:8px; margin-right:9px;"
											name="circulos.png" /><a
								href="../administrador/circulo.xhtml">Circulos</a>
						</li>

						<li><h:graphicImage library="imagens/menu"
											style="width:30px; height:30px;
								margin-left:10px; margin-top:8px; margin-right:9px;"
											name="palestras.png" /><a
								href="../administrador/palestra.xhtml">Palestras</a>
						</li>
						<li><h:graphicImage library="imagens/menu"
											style="width:30px; height:30px;
								margin-left:10px; margin-top:8px; margin-right:9px;"
											name="equipes.png" /><a
								href="../administrador/equipe.xhtml">Equipes</a>
						</li>
						<li><h:graphicImage library="imagens/menu"
											style="width:30px; height:30px;
								margin-left:10px; margin-top:8px; margin-right:9px;"
											name="usuarios.png" /><a
								href="usuario.xhtml">Usuários</a>
						</li>
					</ul>
				</li>
				-->
				<li><a><h:graphicImage library="imagens/menu"
									   style="width:35px; height:35px;" name="montagem.png" />Montagem</a>
					<ul>
						<li><h:graphicImage library="imagens/menu"
											style="width:30px; height:30px;
								margin-left:10px; margin-top:8px; margin-right:9px;"
											name="ecc.png" />
							<a href="ecc.xhtml">ECCs</a>
						</li>
						<li><h:graphicImage library="imagens/menu"
											style="width:30px; height:30px;
								margin-left:10px; margin-top:8px; margin-right:9px;"
											name="fichas.png" />
							<a style="color: #808080; background: #a0c0de; opacity: 1;
							filter: alpha(opacity = 100); border-bottom: 3px solid #b1b1b1;">Fichas</a>
						</li>
						<li><h:graphicImage library="imagens/menu"
											style="width:30px; height:30px;
								margin-left:10px; margin-top:8px; margin-right:9px;"
											name="montagemEquipes.png" />
							<a href="circulo.xhtml">Equipes</a>
						</li>
						<li><h:graphicImage library="imagens/menu"
											style="width:30px; height:30px;
								margin-left:10px; margin-top:8px; margin-right:9px;"
											name="montagemCasais.png" /><a
								href="montagemEncontristas.xhtml">Encontristas</a>
						</li>
						<li><h:graphicImage library="imagens/menu"
											style="width:30px; height:30px;
								margin-left:10px; margin-top:8px; margin-right:9px;"
											name="montagemPalestrantes.png" /><a
								href="montagemPalestrantes.xhtml">Palestrantes</a></li>
						<li><h:graphicImage library="imagens/menu"
											style="width:30px; height:30px;
								margin-left:10px; margin-top:8px; margin-right:9px;"
											name="montagemCirculos.png" /><a
								href="montagemCirculos.xhtml">Círculos</a></li>

					</ul>
				</li>
			</ul>
		</div>
		<div id="status" style="...">
			<div id="ico">
				<h1>
					<h:graphicImage library="imagens/menu" name="fichas.png"
									width="25px" height="25px" />
					<h5>
						<b>Fichas</b>
					</h5>
					<p:commandButton type="button" value="Sair" icon="ui-icon-extlink"
									 style="float: right; margin-right:5px; margin-top: -5px;"
									 onclick="document.location='#{request.contextPath}/j_spring_security_logout'" />
				</h1>
			</div>
			<div id="img-usuario-logado">
				<h5>Usuário logado: #{contextoBean.usuarioLogado.nome}</h5>
				<h1>
					<h:graphicImage library="imagens/menu" name="usuarioLogado.png"
									width="25px" height="25px" />
				</h1>
			</div>
		</div>
		<br />
		<p:ajaxStatus onstart="PF('statusDialog').show()" onsuccess="PF('statusDialog').hide()" />
		<p:growl id="growl" showDetail="false" life="4000" autoUpdate="true" />
		<br />
				<p:dataTable id="fichas" value="#{fichaBean.listaFichas}" var="ficha" rowIndexVar="index" selection="#{fichaBean.ficha}"
							 selectionMode="single" rowKey="#{ficha.id}"
							 emptyMessage="Não há Fichas de Encontristas/Encontreiros cadastradas" style="width:100%;">
					<f:facet name="header">
						<h:panelGrid columns="2" styleClass="semBordaInterna"
									 columnClasses="tituloGridSolicitacao, botoesGridSolicitacao">
							<p:outputLabel value="Lista de Encontristas/Encontreiros"
										   style="float:left;" />
							<h:panelGroup style="float:right;">
								<p:commandButton action="#{fichaBean.novaFicha}"
												 icon="ui-icon-document" value="Nova Ficha"
												 onclick="PF('dlgNovaFicha').show()" update=":cadNovaFicha"
												 process="@this"
												 style="margin-right:15px; background-color:#a0c0de;"/>
								<p:commandButton id="btnDetalhes" value="Detalhes"
												 icon="ui-icon-newwin" style="margin-left: 5px;"
												 onclick="PF('dlgEditarFicha').show()" update=":cadEditarFicha"
												 title="Exibe todas as informações lançadas no ECC selecionado."
												 disabled="#{eccBean.habilitaBotaoDetalhesEcc}"/>
								<p:commandButton id="btnEditar" value="Editar"
												 icon="ui-icon-pencil" style="margin-left: 5px;"
												 onclick="PF('dlgEditarFicha').show()" update=":cadEditarFicha"
												 title="Altera as informações da Ficha selecionada."
												 disabled="#{fichaBean.habilitaBotaoEditarFicha}"/>
								<p:commandButton id="btnAnexar" value="Anexar Foto"
												 style="margin-left: 5px;" icon="ui-icon-link"
												 onclick="PF('dlgUpload').show()" update=":formUpload"
												 process="@this"
												 title="Anexa a foto."
												 disabled="#{fichaBean.habilitaBotaoFoto}" />
								<p:commandButton id="btnExcluir" value="Excluir"
												 icon="ui-icon-trash" style="margin-left: 5px;"
												 disabled="#{fichaBean.habilitaBotaoExcluirFicha}"
												 title="Remove a Ficha selecionada."
												 oncomplete="PF('confirmacaoExclusao').show()" immediate="true"
												 process="@this"
												 update=":listagemFichas:confirmacaoExclusaoDialog"/>
								<p:commandButton id="btnIncluiDirigentes" value="Inclui Aptidões"
												 icon="ui-icon-note" style="margin-left: 5px;"
												 process="@this"
												 onclick="PF('dlgNovasAtividades').show()" update=":cadNovasAtividades"
												 title="Adiciona dirigentes ao ECC selecionado."
												 disabled="#{fichaBean.habilitaBotaoIncluiAptidoes}"/>
								<p:commandButton id="btnIncluiAtividades" value="Inclui Atividades"
												 icon="ui-icon-mail-closed" style="margin-left: 5px;"
												 process="@this"
												 onclick="PF('dlgNovasAtividades').show()" update=":cadNovasAtividades"
												 title="Adiciona aividades a ficha selecionada."
												 disabled="#{fichaBean.habilitaBotaoIncluiAtividades}"/>

							</h:panelGroup>
						</h:panelGrid>
					</f:facet>
					<p:ajax event="rowSelect"
							listener="#{fichaBean.onRowSelectEcc}"
							update="btnEditar btnExcluir btnAnexar btnIncluiDirigentes btnDetalhes btnIncluiAtividades" />
					<p:column headerText="ECC" width="30">
						<p:outputLabel value="#{ficha.primeiraEtapa}"/>
					</p:column>
					<p:column width="130">
						<f:facet name="header">Nome Usual Casal</f:facet>
						#{ficha.nomeUsual}
					</p:column>
					<p:column headerText="Situação" width="70">
						<p:outputLabel value="#{ficha.situacao}"/>
					</p:column>
					<p:column headerText="Nome Ele" width="200">
						<p:outputLabel value="#{ficha.nomeEle}"/>
						<h:graphicImage library="imagens" value="/image?imagem=#{ficha.fotoEle}" rendered="#{ficha.fotoEle.length() > 0}"
										style="width:20px; height:20px; float: right;" title="Foto dele"/>
					</p:column>
					<!--
					<p:column headerText="Nascimento Ele" width="50">
						<p:outputLabel value="#{ficha.nascimentoEle}">
							<f:convertDateTime dateStyle="medium" pattern="dd/MM/yyyy" />
						</p:outputLabel>
					</p:column>
					<p:column headerText="Profissão Ele" width="350">
						<p:outputLabel value="#{ficha.nomeEle}"/>
					</p:column>
					-->
					<p:column headerText="Telefone Ele" width="60">
						<p:outputLabel value="#{ficha.telefoneEle}"/>
					</p:column>
					<p:column headerText="Nome Ela" width="200">
						<p:outputLabel value="#{ficha.nomeEla}"/>
						<h:graphicImage library="imagens" name="photo.png" rendered="#{ficha.fotoEla.length() > 0}"
										style="width:20px; height:20px; float: right;" title="Foto dela"/>
					</p:column>
					<p:column headerText="Último Trabalho" width="140">
						<p:outputLabel value="#{ficha.ultimoTrabalho.descricao}"/>
					</p:column>
					<!--
					<p:column headerText="Nascimento Ela" width="50">
						<p:outputLabel value="#{ficha.nascimentoEla}">
							<f:convertDateTime dateStyle="medium" pattern="dd/MM/yyyy" />
						</p:outputLabel>
					</p:column>
					<p:column headerText="Profissão Ela" width="350">
						<p:outputLabel value="#{ficha.nomeEla}"/>
					</p:column>
					<p:column headerText="Profissão Ela" width="350">
						<p:outputLabel value="#{ficha.nomeEla}"/>
					</p:column>
					-->
					<p:column headerText="Telefone Ela" width="60">
						<p:outputLabel value="#{ficha.telefoneEla}"/>
					</p:column>
					<p:column width="50" headerText="Atividades">
						#{ficha.atividades.size()}
						<h:graphicImage library="imagens" name="dirigentes2.png" width="15" height="15" rendered="#{ficha.atividades.size() > 0}"
										style="float: right;" title="Atividades"/>
					</p:column>

				</p:dataTable>
		<!-- ======================================================================= -->
		<!-- Caixa de diálogo para confirmar exclusão da Ficha				         -->
		<!-- ======================================================================= -->
		<p:confirmDialog header="Excluir Ficha"
						 message="Confirmar a exclusão da Ficha do casal #{fichaBean.ficha.nomeUsual}?"
						 widgetVar="confirmacaoExclusao" id="confirmacaoExclusaoDialog">
			<p:commandButton value="Sim"
							 onclick="PF('confirmacaoExclusao').hide();"
							 action="#{fichaBean.excluirFicha()}" update="fichas" />
			<p:button value="Não"
					  onclick="PF('confirmacaoExclusao').hide(); return false;" />
		</p:confirmDialog>
	</h:form>
		<!-- ==================================================================================== -->
		<!-- ========================= Diálogo para cadastrar nova Ficha ======================== -->
		<!-- ==================================================================================== -->
		<p:dialog id="dlgNovaFicha" header="Lançar nova Ficha"
				  modal="true" widgetVar="dlgNovaFicha"
				  style="background-color:#EBF3FE" resizable="false" width="930px"
				  height="570px">
			<h:form id="cadNovaFicha">
				<p:panel id="panelDadosFicha" style="background-color: #ffffe6">
						<h:message />
						<h:inputHidden value="#{fichaBean.ficha.id}" />
						<p:focus for="situacao" />
					<h:panelGrid columns="4">
							<h:outputLabel value="Nome Usual Casal" for="nomeUsualCasal" />
							<h:outputLabel value="Situação" for="situacao"/>
							<h:outputLabel value="Último Trabalho" for="ultimoTrabalho" />
							<h:outputLabel value="" />
							<p:inputText id="nomeUsualCasal" value="#{fichaBean.ficha.nomeUsual}"
										 maxlength="100" style="width:350px;" disabled="true">
							</p:inputText>
							<p:selectOneMenu id="situacao" disabled="false" required="true"
											 value="#{fichaBean.ficha.situacao}" style="width:100px;">
								<f:selectItem itemLabel="Selecione" noSelectionOption="true" />
								<f:selectItem itemValue="ENCONTREIRO" itemLabel="ENCONTREIRO" />
								<f:selectItem itemValue="ENCONTRISTA" itemLabel="ENCONTRISTA" />
							</p:selectOneMenu>
							<p:selectOneMenu id="ultimoTrabalho" converter="equipeConverter"
								value="#{fichaBean.ficha.ultimoTrabalho}" style="width:270px">
								<f:selectItem itemLabel="Selecione a equipe" noSelectionOption="true" />
								<f:selectItems value="#{equipeBean.lista}"
									   var="equipe" itemValue="#{equipe}"
									   itemLabel="#{equipe.descricao}" />
							</p:selectOneMenu>
						<p:selectBooleanCheckbox value="#{fichaBean.ficha.ativo}" itemLabel="Ativo?" style="margin-left:5px;" disabled="true"/>
					</h:panelGrid>
					<!-- ========================= Dados do HOMEM ======================== -->
					<div id="divDadosHomem" >
						<div id="divBoxDadosHomem">
							<h:panelGrid columns="3">
								<h:graphicImage library="imagens" name="homem.png"
											style="width:20px; height:20px;" /> Dados do Homem
							</h:panelGrid>
							<h:panelGrid columns="3">
								<h:outputLabel value="Ele" for="nomeEle" />
								<h:outputLabel value="Nascimento" for="nascimentoEle" />
								<h:outputLabel value="Nome Usual" for="usualEle" />
								<p:inputText id="nomeEle" value="#{fichaBean.ficha.nomeEle}"
											 required="true" requiredMessage="O campo Nome dele é obrigatório"
											 maxlength="100" style="width:400px;">
								</p:inputText>
								<p:calendar id="nascimentoEle" mask="99/99/9999" requiredMessage="O Campo Data de Nascimento dele é obrigatório"
											value="#{fichaBean.ficha.nascimentoEle}" required="true"
											pattern="dd/MM/yyyy"/>
								<p:inputText id="usualEle" value="#{fichaBean.ficha.nomeUsualEle}"
											 required="true" requiredMessage="O campo Nome Usual dele é obrigatório"
											 maxlength="50" style="width:250px;">
								</p:inputText>
								<h:outputLabel value="" />
							</h:panelGrid>
							<h:panelGrid columns="3">
								<h:outputLabel value="Profissão" for="profissaoEle" />
								<h:outputLabel value="Telefone" for="telefoneEle" />
								<h:outputLabel value="Religião" for="religiaoEle" />
								<p:inputText id="profissaoEle" value="#{fichaBean.ficha.profissaoEle}"
											 required="true" requiredMessage="O campo Profissão dele é obrigatório"
											 maxlength="100" style="width:400px;">
								</p:inputText>
								<p:inputText id="telefoneEle" value="#{fichaBean.ficha.telefoneEle}"
											 required="true" requiredMessage="O campo Nome Usual dele é obrigatório"
											 maxlength="50" style="width:158px;">
								</p:inputText>
								<p:selectOneMenu id="religiaoEle"
												 value="#{fichaBean.ficha.religiaoEle}" required="true" style="width:225px;">
									<f:selectItem itemLabel="Selecione" noSelectionOption="true" />
									<f:selectItem itemValue="CATÓLICO" itemLabel="CATÓLICO" />
									<f:selectItem itemValue="ADVENTISTA" itemLabel="ADVENTISTA" />
									<f:selectItem itemValue="EVANGÉLICO" itemLabel="EVANGÉLICO" />
									<f:selectItem itemValue="NENHUM" itemLabel="NENHUM" />
								</p:selectOneMenu>
							</h:panelGrid>
						</div>
					</div>
				<br></br>
					<!-- ========================= Dados da MULHER ======================== -->
					<div id="divDadosMulher" >
						<div id="divBoxDadosMulher">
							<h:panelGrid columns="4">
								<h:graphicImage library="imagens" name="mulher.png"
												style="width:20px; height:20px;" /> Dados da Mulher
							</h:panelGrid>
							<h:panelGrid columns="3">
								<h:outputLabel value="Ela" for="nomeEla" />
								<h:outputLabel value="Nascimento" for="nascimentoEla" />
								<h:outputLabel value="Nome Usual" for="usualEla" />
								<p:inputText id="nomeEla" value="#{fichaBean.ficha.nomeEla}"
											 required="true" requiredMessage="O campo Nome dela é obrigatório"
											 maxlength="100" style="width:400px;">
								</p:inputText>
								<p:calendar id="nascimentoEla" mask="99/99/9999" requiredMessage="O Campo Data de Nascimento dela é obrigatório"
											value="#{fichaBean.ficha.nascimentoEla}" required="true"
											pattern="dd/MM/yyyy"/>
								<p:inputText id="usualEla" value="#{fichaBean.ficha.nomeUsualEla}"
											 required="true" requiredMessage="O campo Nome Usual dela é obrigatório"
											 maxlength="50" style="width:250px;">
								</p:inputText>
							</h:panelGrid>
							<h:panelGrid columns="3">
								<h:outputLabel value="Profissão" for="profissaoEla" />
								<h:outputLabel value="Telefone" for="telefoneEla" />
								<h:outputLabel value="Religião" for="religiaoEla" />
								<p:inputText id="profissaoEla" value="#{fichaBean.ficha.profissaoEla}"
											 required="true" requiredMessage="O campo Profissão dela é obrigatório"
											 maxlength="100" style="width:400px;">
								</p:inputText>
								<p:inputText id="telefoneEla" value="#{fichaBean.ficha.telefoneEla}"
											 required="true" requiredMessage="O campo Nome Usual dela é obrigatório"
											 maxlength="50" style="width:158px;">
								</p:inputText>
								<p:selectOneMenu id="religiaoEla"
												 value="#{fichaBean.ficha.religiaoEla}" required="true" style="width:225px;">
									<f:selectItem itemLabel="Selecione" noSelectionOption="true" />
									<f:selectItem itemValue="CATÓLICO" itemLabel="CATÓLICO" />
									<f:selectItem itemValue="ADVENTISTA" itemLabel="ADVENTISTA" />
									<f:selectItem itemValue="EVANGÉLICO" itemLabel="EVANGÉLICO" />
									<f:selectItem itemValue="NENHUM" itemLabel="NENHUM" />
								</p:selectOneMenu>
							</h:panelGrid>
						</div>
					</div>
					<h:panelGrid columns="4">
						<h:outputLabel value="Rua" for="rua" />
						<h:outputLabel value="Número" for="numero"/>
						<h:outputLabel value="Complemento" for="complemento" />
						<h:outputLabel value="CEP" for="cep" />
						<p:inputText id="rua" value="#{fichaBean.ficha.rua}" required="true" requiredMessage="O campo Rua é obrigatório"
									 maxlength="100" style="width:390px;">
						</p:inputText>
						<p:inputText id="numero" value="#{fichaBean.ficha.numero}" required="true" requiredMessage="O campo Número é obrigatório"
									 maxlength="10" style="width:60px;">
						</p:inputText>
						<p:inputText id="complemento" value="#{fichaBean.ficha.complemento}"
									 maxlength="100" style="width:268px;">
						</p:inputText>
						<p:inputText id="cep" value="#{fichaBean.ficha.cep}" required="true" requiredMessage="O campo CEP é obrigatório"
									 maxlength="9" style="width:90px;">
						</p:inputText>
					</h:panelGrid>
					<h:panelGrid columns="5">
						<h:outputLabel value="Bairro" for="bairro"/>
						<h:outputLabel value="Data Casamento" for="dataCasamento" />
						<h:outputLabel value="" />
						<h:outputLabel value="Qual Paróquia" for="paroquia" />
						<h:outputLabel value="Nº Filhos" for="filhos" />
						<p:inputText id="bairro" value="#{fichaBean.ficha.bairro}"
									 maxlength="60" style="width:300px;" required="true" requiredMessage="O campo Bairro é obrigatório">
						</p:inputText>
						<p:calendar id="dataCasamento" mask="99/99/9999"
									value="#{fichaBean.ficha.dataCasamento}"
									pattern="dd/MM/yyyy"/>
						<p:selectBooleanCheckbox value="#{fichaBean.ficha.casamentoReligioso}" itemLabel="Religioso?" style="margin-left:5px;" />
						<p:inputText id="paroquia" value="#{fichaBean.ficha.paroquia}"
									 maxlength="60" style="width:230px;">
						</p:inputText>
						<p:inputText id="filhos" value="#{fichaBean.ficha.qtdFilhos}"
									 maxlength="10" style="width:43px;">
						</p:inputText>

					</h:panelGrid>
					<h:panelGrid columns="3">
						<h:outputLabel value="ECC - 1º Etapa" for="etapa1" />
						<h:outputLabel value="ECC - 2º Etapa" for="etapa2" />
						<h:outputLabel value="ECC - 3º Etapa" for="etapa3" />
						<p:inputText id="etapa1" value="#{fichaBean.ficha.primeiraEtapa}" disabled="false"
									 maxlength="10" style="width:75px;">
						</p:inputText>
						<p:inputText id="etapa2" value="#{fichaBean.ficha.segundaEtapa}" disabled="false"
									 maxlength="10" style="width:75px;">
						</p:inputText>
						<p:inputText id="etapa3" value="#{fichaBean.ficha.terceiraEtapa}" disabled="false"
									 maxlength="10" style="width:75px;">
						</p:inputText>

					</h:panelGrid>
						<h:panelGrid columns="2">
							<h:outputLabel value="" />
							<p:commandButton value="Salvar" action="#{fichaBean.salvarFicha()}"
											 update=":listagemFichas @form" oncomplete="if(!args.validationFailed){PF('dlgNovaFicha').hide();}"
											 icon="ui-icon-disk" process="@form">
							</p:commandButton>
						</h:panelGrid>
				</p:panel>
			</h:form>
		</p:dialog>

		<!-- ======================================================================= -->
		<!-- Dialogo para realizar upload das fotos                                  -->
		<!-- ======================================================================= -->
		<p:dialog id="dialogUpload" header="Anexar fotos" modal="true"
				  widgetVar="dlgUpload" width="710" style="background-color:#e1eaea"
				  resizable="false" closable="false">
			<h:form id="formUpload" enctype="multipart/form-data">
				<h:message />
				<h:panelGrid id="displayUpload">
					<p:panel id="basic" style="background-color:#EBF3FE; width:671px;">
						<h:panelGrid columns="2">
							<p:outputLabel value="Nome do Casal : " styleClass="negrito"/>
							<p:outputLabel
									value="#{fichaBean.ficha.nomeEle} E #{fichaBean.ficha.nomeEla}" />
							<p:outputLabel value="Nome Usual do Casal: " styleClass="negrito"/>
							<p:outputLabel value="#{fichaBean.ficha.nomeUsual}" />
						</h:panelGrid>
					</p:panel>
					<br />
					<p:panel id="foto" style="background-color:#EBF3FE; width:671px;">
						<h:panelGrid columns="4">
							<p:outputLabel value="Tipo"/>
							<p:selectOneButton style="margin-left:5px;" id="tipo"
											   value="#{fichaBean.tipoFoto}">
								<f:selectItem itemValue="HOMEM" itemLabel="HOMEM" />
								<f:selectItem itemValue="MULHER" itemLabel="MULHER" />
							</p:selectOneButton >
							<p:outputLabel value="Foto"/>
							<p:fileUpload label="Procurar..."
										  value="#{fichaBean.uploadedFile}"
										  allowTypes="/(\.|\/)(gif|jpe?g|png)$/"
										  invalidFileMessage="São permitidas somente imagens (gif, jpeg, jpg e png)"
										  auto="false" skinSimple="true"
										  uploadLabel="Enviar" cancelLabel="Cancelar" style="width:621px;"
										  fileLimit="2" mode="simple" multiple="false"
										  sizeLimit="1024000"
										  invalidSizeMessage="O arquivo deve ter no máximo 1 MB"
										  update="fotoEleEla" process="tipo"/>
							<p:fileUpload label="Procurar..." process="tipo" rendered="false"
										  fileUploadListener="#{fichaBean.salvarFotoCompleta}" auto="false"
										  uploadLabel="Enviar" cancelLabel="Cancelar" style="width:621px;"
										  fileLimit="2" mode="advanced"
										  fileLimitMessage="Apenas um arquivo pode ser enviado"
										  sizeLimit="53145800"
										  invalidSizeMessage="O arquivo deve ter no máximo 2 MB"
										  update="fotoEleEla" />
						</h:panelGrid>
					</p:panel>
					<p:commandButton id="enviaFoto" ajax="false" value="Enviar" process="@this" update="fotoEleEla"
									 actionListener="#{fichaBean.salvarFotoSimples}"/>
					<br />
					<h:panelGrid id="fotoEleEla" columns="2">
						<p:outputLabel value="Homem" styleClass="negrito" rendered="#{fichaBean.ficha.fotoEle.length() > 0}"
									   style="margin-left:10px;" />
						<p:outputLabel value="Mulher" styleClass="negrito" rendered="#{fichaBean.ficha.fotoEla.length() > 0}"
									   style="margin-left:10px;" />
						<h:graphicImage library="imagens" value="/image?imagem=#{fichaBean.ficha.fotoEle}"  rendered="#{fichaBean.ficha.fotoEle.length() > 0}"
										style="width:80px; height:80px;" />
						<h:graphicImage library="imagens" value="/image?imagem=#{fichaBean.ficha.fotoEla}"  rendered="#{fichaBean.ficha.fotoEla.length() > 0}"
										style="width:80px; height:80px;" />
					</h:panelGrid>


					<h:panelGrid columns="2">
						<p:commandButton onclick="PF('dlgUpload').hide()" actionListener="#{fichaBean.alterarFicha}"
										 update=":listagemFichas:fichas" process="@none"
										 icon="ui-icon-closethick" value="Fechar" />
					</h:panelGrid>
				</h:panelGrid>
			</h:form>
		</p:dialog>
		<!-- ==================================================================================== -->
		<!-- ========================= Diálogo para alterar uma Ficha =========================== -->
		<!-- ==================================================================================== -->
		<p:dialog id="dlgEditaFicha" header="Alterar Ficha"
				  modal="true" widgetVar="dlgEditarFicha"
				  style="background-color:#EBF3FE" resizable="false" width="920px"
				  height="690px">
			<h:form id="cadEditarFicha">
				<p:panel id="panelEditaFicha" style="background-color: #ffffe6">
					<h:message />
					<h:inputHidden value="#{fichaBean.ficha.id}" />
					<p:focus for="ultimoTrabalho" />
					<h:panelGrid columns="4">
						<h:outputLabel value="Nome Usual Casal" for="nomeUsualCasal" />
						<h:outputLabel value="Situação" for="situacao"/>
						<h:outputLabel value="Último Trabalho" for="ultimoTrabalho" />
						<h:outputLabel value="" />
						<p:inputText id="nomeUsualCasal" value="#{fichaBean.ficha.nomeUsual}"
									 maxlength="100" style="width:350px;" disabled="true">
						</p:inputText>
						<p:selectOneMenu id="situacao" disabled="false" required="true"
										 value="#{fichaBean.ficha.situacao}" style="width:100px;">
							<f:selectItem itemLabel="Selecione" noSelectionOption="true" />
							<f:selectItem itemValue="ENCONTREIRO" itemLabel="ENCONTREIRO" />
							<f:selectItem itemValue="ENCONTRISTA" itemLabel="ENCONTRISTA" />
						</p:selectOneMenu>
						<p:selectOneMenu id="ultimoTrabalho" converter="equipeConverter"
										 value="#{fichaBean.ficha.ultimoTrabalho}" style="width:270px">
							<f:selectItem itemLabel="Selecione a equipe" noSelectionOption="true" />
							<f:selectItems value="#{equipeBean.lista}"
										   var="equipe" itemValue="#{equipe}"
										   itemLabel="#{equipe.descricao}" />
						</p:selectOneMenu>
						<p:selectBooleanCheckbox value="#{fichaBean.ficha.ativo}" itemLabel="Ativo?" style="margin-left:5px;" disabled="false"/>
					</h:panelGrid>
					<!-- ========================= Dados do HOMEM ======================== -->
					<div id="divDadosHomemEditar" >
						<div id="divBoxDadosHomemEditar">
							<h:panelGrid columns="4">
								<h:graphicImage library="imagens" value="/image?imagem=#{fichaBean.ficha.fotoEle}" rendered="#{fichaBean.ficha.fotoEle.length() > 0}"
												style="width:80px; height:80px;"/> Dados do Homem
							</h:panelGrid>
							<h:panelGrid columns="3">
								<h:outputLabel value="Ele" for="nomeEle" />
								<h:outputLabel value="Nascimento" for="nascimentoEle" />
								<h:outputLabel value="Nome Usual" for="usualEle" />
								<p:inputText id="nomeEle" value="#{fichaBean.ficha.nomeEle}"
											 maxlength="100" style="width:400px;">
								</p:inputText>
								<p:calendar id="nascimentoEle" mask="99/99/9999" requiredMessage="O Campo Data de Nascimento dele é obrigatório"
											value="#{fichaBean.ficha.nascimentoEle}" required="true"
											pattern="dd/MM/yyyy"/>
								<p:inputText id="usualEle" value="#{fichaBean.ficha.nomeUsualEle}"
											 required="true" requiredMessage="O campo Nome Usual dele é obrigatório"
											 maxlength="50" style="width:250px;">
								</p:inputText>
							</h:panelGrid>
							<h:panelGrid columns="3">
								<h:outputLabel value="Profissão" for="profissaoEle" />
								<h:outputLabel value="Telefone" for="telefoneEle" />
								<h:outputLabel value="Religião" for="religiaoEle" />
								<p:inputText id="profissaoEle" value="#{fichaBean.ficha.profissaoEle}"
											 required="true" requiredMessage="O campo Profissão dele é obrigatório"
											 maxlength="100" style="width:400px;">
								</p:inputText>
								<p:inputText id="telefoneEle" value="#{fichaBean.ficha.telefoneEle}"
											 required="true" requiredMessage="O campo Nome Usual dele é obrigatório"
											 maxlength="50" style="width:158px;">
								</p:inputText>
								<p:selectOneMenu id="religiaoEle"
												 value="#{fichaBean.ficha.religiaoEle}" required="true" style="width:225px;">
									<f:selectItem itemLabel="Selecione" noSelectionOption="true" />
									<f:selectItem itemValue="CATÓLICO" itemLabel="CATÓLICO" />
									<f:selectItem itemValue="ADVENTISTA" itemLabel="ADVENTISTA" />
									<f:selectItem itemValue="EVANGÉLICO" itemLabel="EVANGÉLICO" />
									<f:selectItem itemValue="NENHUM" itemLabel="NENHUM" />
								</p:selectOneMenu>
							</h:panelGrid>
						</div>
					</div>
					<br></br>
					<!-- ========================= Dados da MULHER ======================== -->
					<div id="divDadosMulherEditar" >
						<div id="divBoxDadosMulherEditar">
							<h:panelGrid columns="4">
								<h:graphicImage library="imagens" value="/image?imagem=#{fichaBean.ficha.fotoEla}"  rendered="#{fichaBean.ficha.fotoEla.length() > 0}"
												style="width:80px; height:80px;" /> Dados da Mulher
							</h:panelGrid>
							<h:panelGrid columns="3">
								<h:outputLabel value="Ela" for="nomeEla" />
								<h:outputLabel value="Nascimento" for="nascimentoEla" />
								<h:outputLabel value="Nome Usual" for="usualEla" />
								<p:inputText id="nomeEla" value="#{fichaBean.ficha.nomeEla}"
											 required="true" requiredMessage="O campo Nome dela é obrigatório"
											 maxlength="100" style="width:400px;">
								</p:inputText>
								<p:calendar id="nascimentoEla" mask="99/99/9999" requiredMessage="O Campo Data de Nascimento dela é obrigatório"
											value="#{fichaBean.ficha.nascimentoEla}" required="true"
											pattern="dd/MM/yyyy"/>
								<p:inputText id="usualEla" value="#{fichaBean.ficha.nomeUsualEla}"
											 required="true" requiredMessage="O campo Nome Usual dela é obrigatório"
											 maxlength="50" style="width:250px;">
								</p:inputText>
							</h:panelGrid>
							<h:panelGrid columns="3">
								<h:outputLabel value="Profissão" for="profissaoEla" />
								<h:outputLabel value="Telefone" for="telefoneEla" />
								<h:outputLabel value="Religião" for="religiaoEla" />
								<p:inputText id="profissaoEla" value="#{fichaBean.ficha.profissaoEla}"
											 required="true" requiredMessage="O campo Profissão dela é obrigatório"
											 maxlength="100" style="width:400px;">
								</p:inputText>
								<p:inputText id="telefoneEla" value="#{fichaBean.ficha.telefoneEla}"
											 required="true" requiredMessage="O campo Nome Usual dela é obrigatório"
											 maxlength="50" style="width:158px;">
								</p:inputText>
								<p:selectOneMenu id="religiaoEla"
												 value="#{fichaBean.ficha.religiaoEla}" required="true" style="width:225px;">
									<f:selectItem itemLabel="Selecione" noSelectionOption="true" />
									<f:selectItem itemValue="CATÓLICO" itemLabel="CATÓLICO" />
									<f:selectItem itemValue="ADVENTISTA" itemLabel="ADVENTISTA" />
									<f:selectItem itemValue="EVANGÉLICO" itemLabel="EVANGÉLICO" />
									<f:selectItem itemValue="NENHUM" itemLabel="NENHUM" />
								</p:selectOneMenu>
							</h:panelGrid>
						</div>
					</div>
					<h:panelGrid columns="4">
						<h:outputLabel value="Rua" for="rua" />
						<h:outputLabel value="Número" for="numero"/>
						<h:outputLabel value="Complemento" for="complemento" />
						<h:outputLabel value="CEP" for="cep" />
						<p:inputText id="rua" value="#{fichaBean.ficha.rua}" required="true" requiredMessage="O campo Rua é obrigatório"
									 maxlength="100" style="width:390px;">
						</p:inputText>
						<p:inputText id="numero" value="#{fichaBean.ficha.numero}" required="true" requiredMessage="O campo Número é obrigatório"
									 maxlength="10" style="width:60px;">
						</p:inputText>
						<p:inputText id="complemento" value="#{fichaBean.ficha.complemento}"
									 maxlength="100" style="width:268px;">
						</p:inputText>
						<p:inputText id="cep" value="#{fichaBean.ficha.cep}" required="true" requiredMessage="O campo CEP é obrigatório"
									 maxlength="9" style="width:90px;">
						</p:inputText>
					</h:panelGrid>
					<h:panelGrid columns="5">
						<h:outputLabel value="Bairro" for="bairro"/>
						<h:outputLabel value="Data Casamento" for="dataCasamento" />
						<h:outputLabel value="" />
						<h:outputLabel value="Qual Paróquia" for="paroquia" />
						<h:outputLabel value="Nº Filhos" for="filhos" />
						<p:inputText id="bairro" value="#{fichaBean.ficha.bairro}"
									 maxlength="60" style="width:300px;" required="true" requiredMessage="O campo Bairro é obrigatório">
						</p:inputText>
						<p:calendar id="dataCasamento" mask="99/99/9999"
									value="#{fichaBean.ficha.dataCasamento}"
									pattern="dd/MM/yyyy"/>
						<p:selectBooleanCheckbox value="#{fichaBean.ficha.casamentoReligioso}" itemLabel="Religioso?" style="margin-left:5px;" />
						<p:inputText id="paroquia" value="#{fichaBean.ficha.paroquia}"
									 maxlength="60" style="width:230px;">
						</p:inputText>
						<p:inputText id="filhos" value="#{fichaBean.ficha.qtdFilhos}"
									 maxlength="10" style="width:43px;">
						</p:inputText>

					</h:panelGrid>
					<h:panelGrid columns="3">
						<h:outputLabel value="ECC - 1º Etapa" for="etapa1" />
						<h:outputLabel value="ECC - 2º Etapa" for="etapa2" />
						<h:outputLabel value="ECC - 3º Etapa" for="etapa3" />
						<p:inputText id="etapa1" value="#{fichaBean.ficha.primeiraEtapa}" disabled="false"
									 maxlength="10" style="width:75px;">
						</p:inputText>
						<p:inputText id="etapa2" value="#{fichaBean.ficha.segundaEtapa}" disabled="false"
									 maxlength="10" style="width:75px;">
						</p:inputText>
						<p:inputText id="etapa3" value="#{fichaBean.ficha.terceiraEtapa}" disabled="false"
									 maxlength="10" style="width:75px;">
						</p:inputText>

					</h:panelGrid>
					<h:panelGrid columns="2">
						<h:outputLabel value="" />
						<p:commandButton value="Alterar" style="margin-left: 10px;"
										 action="#{fichaBean.alterarFicha()}" icon="ui-icon-check"
										 update=":listagemFichas @form" process="@form"
										 oncomplete="if(!args.validationFailed){PF('dlgEditarFicha').hide();}" />
					</h:panelGrid>
				</p:panel>
			</h:form>
		</p:dialog>
		<!-- ==================================================================================== -->
		<!-- ========================= Diálogo para incluir Atividades ========================== -->
		<!-- ==================================================================================== -->
		<p:dialog id="dialogNovasAtividades" header="Lançar Atividades"
				  modal="true" widgetVar="dlgNovasAtividades"
				  style="background-color:#EBF3FE" resizable="false" width="920px"
				  height="564px">
			<h:form id="cadNovasAtividades">
				<h:message />
				<p:panel id="panelDadosAtividades" style="background-color: #ffffe6">
					<h:inputHidden value="#{fichaBean.ficha.id}" />
					<p:panel id="basic"
							 style="background-color:#EBF3FE; width:764px;"
							 visible="true">
						<h:panelGrid columns="2">
							<p:outputLabel value="Nome do Casal : " styleClass="negrito"/>
							<p:outputLabel value="#{fichaBean.ficha.nomeEle} E #{fichaBean.ficha.nomeEla}" />
							<p:outputLabel value="Nome Usual do Casal: " styleClass="negrito"/>
							<p:outputLabel value="#{fichaBean.ficha.nomeUsual}" />
						</h:panelGrid>
					</p:panel>
					<br/>
					<h:panelGrid columns="4">
						<h:outputLabel value="ECC" for="ecc" />
						<h:outputLabel value="Atividade" for="equipe" />
						<h:outputLabel value=""/>
						<h:outputLabel value=""/>
						<p:selectOneMenu id="ecc" value="#{fichaBean.ecc}"
										 required="true"
										 requiredMessage="Selecione o ECC."
										 style="width:105px" converter="eccConverter"
										 filter="true">
							<f:selectItem itemLabel="Selecione o ECC" noSelectionOption="true" />
							<f:selectItems value="#{eccBean.listaEccAtividades}"
										   var="ecc" itemValue="#{ecc}"
										   itemLabel="#{ecc.numero}" />
						</p:selectOneMenu>

						<p:selectOneMenu id="equipe" converter="equipeConverter"
										 required="true"
										 requiredMessage="Selecione a Atividade."
										 value="#{fichaBean.equipe}" style="width:280px">
							<f:selectItem itemLabel="Selecione a atividade" noSelectionOption="true" />
							<f:selectItems value="#{equipeBean.lista}"
										   var="equipe" itemValue="#{equipe}"
										   itemLabel="#{equipe.descricao}" />
						</p:selectOneMenu>
						<p:selectBooleanCheckbox id="coordenador" value="#{fichaBean.ehCoordenador}" itemLabel="Coordenador?" style="margin-left:5px;" />
						<p:commandButton process="@this, ecc, equipe coordenador" value="Incluir"
										 style="margin-left:10px;"
										 action="#{fichaBean.salvaAtividade()}" icon="ui-icon-check"
										 title="Incluir uma nova atividade..."
										 update="ecc, equipe, cadNovasAtividades:tabelaAtividades, listagemFichas:fichas">
						</p:commandButton>
					</h:panelGrid>
					<h:panelGrid>
						<p:panel id="informacao"
								 style="background-color:#EBF3FE; width:764px;"
								 visible="true">
							<p:outputLabel
									value="Atividades realizadas pelo casal"
									styleClass="negrito" style="margin-left:5px;" />
						</p:panel>
					</h:panelGrid>
					<h:panelGrid columns="3">
						<p:dataTable id="tabelaAtividades" sortBy="#{atividade.ecc.numero}" scrollable="true" scrollHeight="143"
									 style="margin-right: 10px; width:770px;"
									 value="#{fichaBean.ficha.atividades}" var="atividade"
									 emptyMessage="Não há Atividades cadastradas" rowIndexVar="index">
							<f:facet name="header">
								<p:outputLabel value="Total de Atividades - #{fichaBean.ficha.atividades.size()}" />
							</f:facet>
								<p:column headerText="ECC" width="40">
									<p:outputLabel value="#{atividade.ecc.numero}" />
								</p:column>
								<p:column headerText="Atividade" width="200">
									<p:outputLabel value="#{atividade.equipe.descricao}" />
									<h:graphicImage library="imagens" name="coordenador.png" width="15" height="15" rendered="#{atividade.coordenador}"
													style="float: right;" title="Coordenador"/>
								</p:column>
								<p:column headerText="Excluir" styleClass="Gildasio" width="40">
									<p:commandLink update=":cadNovasAtividades:tabelaAtividades, listagemFichas:fichas"
												   process="@this" action="#{fichaBean.removeAtividade()}">
										<h:graphicImage library="imagens" name="remover.png" />
										<f:setPropertyActionListener target="#{fichaBean.atividade}"
																	 value="#{atividade}" />
									</p:commandLink>
								</p:column>
						</p:dataTable>
					</h:panelGrid>

				</p:panel>
			</h:form>
		</p:dialog>
		<p:dialog widgetVar="statusDialog" modal="true" draggable="false"
				  closable="false" resizable="false" showHeader="false" width="250px">
			<div id="divLoadingFora">
				<div id="divLoadingEsquerda">
					<h:graphicImage library="imagens" name="SLG.ico" width="60" height="60" />
				</div>
				<div id="divLoadingDireita">
					<h:outputLabel value="Processando..." />
					<h:graphicImage library="imagens" name="barra.gif" />
				</div>
			</div>
		</p:dialog>
</h:body>
</html>