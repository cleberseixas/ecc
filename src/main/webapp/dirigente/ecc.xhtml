<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions">

<h:head>
	<title>ECC-SLG</title>
	<link rel="shortcut icon" href="../resources/imagens/SLG.ico" />
	<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" />
	<h:outputScript library="js" name="locale-primefaces.js" />
	<h:outputScript library="js" name="bootstrap.min.js" />

	<h:outputStylesheet library="css" name="modelo.css" />
	<h:outputStylesheet library="css" name="menu.css" />
	<h:outputStylesheet library="css" name="AdminLTE.css" />
	<h:outputStylesheet library="css" name="font-awesome.min.css" />
</h:head>

<h:body style="background-color:#EBF3FE">
	<h:form id="listagemEccs">
		<div id="menubar">
			<li class="icone"><h:graphicImage library="imagens" name="logo_ECC.png" width="400" height="72" /></li>
			<ul>
				<li><a href="../publico/estatistica.xhtml">
					<h:graphicImage library="imagens/menu"
									style="width:35px; height:35px;" name="estatisticas.png" />Indicadores
				</a></li>
				<h:panelGroup rendered="#{contextoBean.usuarioLogado.perfil eq 'Administrador'}">
					<li>
						<a><h:graphicImage library="imagens/menu"
										   style="width:35px; height:35px;" name="cadastros.png" />Cadastros</a>
						<ul>
							<li><h:graphicImage library="imagens/menu"
												style="width:30px; height:30px;
								margin-left:10px; margin-top:8px; margin-right:9px;"
												name="circulos.png" /><a
									href="../administrador/circulo.xhtml">Circulos</a>
							</li>

							<li><h:graphicImage library="imagens/menu"
												style="width:30px; height:30px;
								margin-left:10px; margin-top:8px; margin-right:9px;"
												name="palestras.png" /><a
									href="../administrador/palestra.xhtml">Palestras</a>
							</li>
							<li><h:graphicImage library="imagens/menu"
												style="width:30px; height:30px;
								margin-left:10px; margin-top:8px; margin-right:9px;"
												name="equipes.png" /><a
									href="../administrador/equipe.xhtml">Equipes</a>
							</li>
							<li><h:graphicImage library="imagens/menu"
												style="width:30px; height:30px;
								margin-left:10px; margin-top:8px; margin-right:9px;"
												name="usuarios.png" /><a
									href="usuario.xhtml">Usuários</a>
							</li>
						</ul>
					</li>
				</h:panelGroup>
				<li><a><h:graphicImage library="imagens/menu"
									   style="width:35px; height:35px;" name="montagem.png" />Montagem</a>
					<ul>
						<li><h:graphicImage library="imagens/menu"
											style="width:30px; height:30px;
								margin-left:10px; margin-top:8px; margin-right:9px;"
											name="ecc.png" />
							<a style="color: #808080; background: #a0c0de; opacity: 1;
							filter: alpha(opacity = 100); border-bottom: 3px solid #b1b1b1;">ECCs</a></li>
						<li><h:graphicImage library="imagens/menu"
											style="width:30px; height:30px;
								margin-left:10px; margin-top:8px; margin-right:9px;"
											name="fichas.png" /><a href="montagemFicha.xhtml">Fichas
						</a></li>
						<li><h:graphicImage library="imagens/menu"
											style="width:30px; height:30px;
								margin-left:10px; margin-top:8px; margin-right:9px;"
											name="montagemEquipes.png" /><a href="montagemEquipe.xhtml">Equipes
						</a></li>
						<li><h:graphicImage library="imagens/menu"
											style="width:30px; height:30px;
								margin-left:10px; margin-top:8px; margin-right:9px;"
											name="montagemCasais.png" /><a
								href="../dirigente/montagemEncontrista.xhtml">Encontristas</a>
						</li>
						<li><h:graphicImage library="imagens/menu"
											style="width:30px; height:30px;
								margin-left:10px; margin-top:8px; margin-right:9px;"
											name="montagemPalestrantes.png" /><a
								href="montagemPalestrante.xhtml">Palestrantes</a></li>
						<li><h:graphicImage library="imagens/menu"
											style="width:30px; height:30px;
								margin-left:10px; margin-top:8px; margin-right:9px;"
											name="montagemCirculos.png" /><a
								href="../dirigente/montagemCirculo.xhtml">Círculos</a></li>
						<li><h:graphicImage library="imagens/menu"
											style="width:30px; height:30px;
								margin-left:10px; margin-top:8px; margin-right:9px;"
											name="montagemCirculosEstudos.png" /><a
								href="../dirigente/montagemCirculoEstudo.xhtml">Círculos de Estudo</a></li>

					</ul>
				</li>
			</ul>
		</div>
		<div id="status" style="...">
			<div id="ico">
				<h1>
					<h:graphicImage library="imagens/menu" name="ecc.png"
									width="25px" height="25px" />
					<h5>
						<b>ECCs</b>
					</h5>
					<p:commandButton type="button" value="Sair" icon="ui-icon-extlink"
									 style="float: right; margin-right:5px; margin-top: -5px;"
									 onclick="document.location='#{request.contextPath}/j_spring_security_logout'" />
				</h1>
			</div>
			<div id="img-usuario-logado">
				<h5>Usuário logado: #{contextoBean.usuarioLogado.nome}</h5>
				<h1>
					<h:graphicImage library="imagens/menu" name="usuarioLogado.png"
									width="25px" height="25px" />
				</h1>
			</div>
		</div>
		<br />
		<p:ajaxStatus onstart="PF('statusDialog').show()" onsuccess="PF('statusDialog').hide()" />
		<f:metadata>
			<f:viewAction action="#{eccBean.removeDirigentesLimbo()}" />
		</f:metadata>
		<p:growl id="growl" showDetail="false" life="4000" autoUpdate="true" />
		<br />
		<p:toolbar>
			<f:facet name="left">
				<h:panelGrid columns="5">
					<p:outputLabel value="ECC:" />
					<p:selectOneMenu id="lbECC" value="#{eccBean.idEcc}" converter="eccConverter"
									 style="width:110px;">
						<f:selectItem itemLabel="Selecione o ECC." noSelectionOption="true"/>
						<f:selectItems value="#{eccBean.listaEcc}"
									   var="ecc" itemValue="#{ecc}" itemLabel="#{ecc.numero}"/>
					</p:selectOneMenu>
					<p:selectOneButton style="margin-left:5px;" id="statusECC"
									   value="#{eccBean.statusEcc}">
						<f:selectItem itemLabel="TODOS" itemValue="TODOS" />
						<f:selectItem itemLabel="ANDAMENTO" itemValue="ANDAMENTO" />
						<f:selectItem itemLabel="ENCERRADO" itemValue="ENCERRADO" />
					</p:selectOneButton >
					<p:commandButton icon="ui-icon-search" update="eccs" process="@this statusECC lbECC"
									 action="#{eccBean.filtraEcc()}"/>
				</h:panelGrid>
			</f:facet>
		</p:toolbar>
				<p:dataTable id="eccs" value="#{eccBean.listaUltimoEcc}" var="ecc" rowIndexVar="index" selection="#{eccBean.ecc}"
							 selectionMode="single" rowKey="#{ecc.id}"
							 emptyMessage="Não há ECCs cadastrados" style="width:1414px;"
							 paginator="false" paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
							 rowsPerPageTemplate="14,28,42,56,70" paginatorPosition="top"
							 currentPageReportTemplate="Registro(s) {startRecord} a {endRecord} de um total de {totalRecords} - Página {currentPage} de {totalPages}">
					<f:facet name="header">
						<h:panelGrid columns="2" styleClass="semBordaInterna"
									 columnClasses="tituloGridSolicitacao, botoesGridSolicitacao">
							<p:outputLabel value="ECCs Cadastrados"
										   style="float:left;" />
							<h:panelGroup style="float:right;">
								<p:commandButton action="#{eccBean.novoEcc}"
												 icon="ui-icon-document" value="Novo ECC"
												 onclick="PF('dlgNovoEcc').show()" update=":cadNovoEcc"
												 process="@this"
												 style="margin-right:15px; background-color:#a0c0de;"/>
								<p:commandButton id="btnDetalhes" value="Detalhes" rendered="false"
												 icon="ui-icon-newwin" style="margin-left: 5px;"
												 onclick="PF('dlgEditarEcc').show()" update=":cadEditarEcc"
												 title="Exibe todas as informações lançadas no ECC selecionado."
												 disabled="#{eccBean.habilitaBotaoDetalhesEcc}"/>
								<p:commandButton id="btnEditar" value="Editar"
												 icon="ui-icon-pencil" style="margin-left: 5px;"
												 onclick="PF('dlgEditarEcc').show()" update=":cadEditarEcc"
												 title="Altera as informações do ECC selecionado."
												 disabled="#{eccBean.habilitaBotaoEditarEcc}"/>
								<p:commandButton id="btnExcluir" value="Excluir" rendered="false"
												 icon="ui-icon-trash" style="margin-left: 5px;"
												 disabled="#{eccBean.habilitaBotaoExcluirEcc}"
												 title="Remove o ECC selecionado."
												 oncomplete="PF('confirmacaoExclusao').show()" immediate="true"
												 process="@this"
												 update=":listagemEccs:confirmacaoExclusaoDialog"/>
								<p:commandButton id="btnIncluiDirigentes" value="Dirigentes"
												 icon="ui-icon-person" style="margin-left: 5px;"
												 process="@this"
												 onclick="PF('dlgNovosDirigentes').show()" update=":cadNovosDirigentes"
												 title="Adiciona dirigentes ao ECC selecionado."
												 disabled="#{eccBean.habilitaBotaoIncluiDirigentes}"/>
								<p:commandButton id="btnEncerrar" value="Encerrar"
												 icon="ui-icon-locked" style="margin-left: 5px;"
												 disabled="#{eccBean.habilitaBotaoEncerrarEcc}"
												 oncomplete="PF('confirmacaoEncerrar').show()" immediate="true"
												 process="@this"
												 update=":listagemEccs:confirmacaoEncerrarDialog"
												 title="Encerra o ECC selecionado."/>
							</h:panelGroup>
						</h:panelGrid>
						<br />
						<h:panelGrid columns="2" styleClass="semBordaInterna"
									 columnClasses="tituloGridSolicitacao, botoesGridSolicitacao">
						<p:outputLabel value="Relatórios para o Quadrante"
									   style="float:left;" />
							<h:panelGroup style="float:right;">
								<p:commandButton id="btnImprimirConvite" action="#{eccBean.imprimirConvites}"
												 oncomplete="PF('exibiPDF').show()"
												 disabled="#{eccBean.habilitaBotaoImprimirConvites}"
												 icon="ui-icon-print" value="Anexo21" style="margin-left: 5px;"
												 title="Imprime os Convites."
												 ajax="true" update="exibiPDF"/>
								<p:commandButton id="btnImprimirPrece" action="#{eccBean.imprimirPreces}"
												 oncomplete="PF('exibiPDF').show()"
												 disabled="#{eccBean.habilitaBotaoImprimirPreces}"
												 icon="ui-icon-print" value="Anexo22" style="margin-left: 5px;"
												 title="Imprime as Preces."
												 ajax="true" update="exibiPDF"/>
								<p:commandButton id="btnImprimirEncontristas" action="#{eccBean.imprimirEncontristas}"
												 oncomplete="PF('exibiPDF').show()"
												 disabled="#{eccBean.habilitaBotaoImprimirCasaisEncontristas}"
												 icon="ui-icon-print" value="Anexo23" style="margin-left: 5px;"
												 title="Imprime a relação dos Casais Encontristas."
												 ajax="true" update="exibiPDF"/>
								<p:commandButton id="btnImprimirHarmoniaEParabola" action="#{eccBean.imprimirHarmoniaEParabola}"
												 oncomplete="PF('exibiPDF').show()"
												 disabled="#{eccBean.habilitaBotaoImprimirHarmoniaEParabola}"
												 icon="ui-icon-print" value="Anexo24" style="margin-left: 5px;"
												 title="Imprime o Círculo de Estudo HARMONIA CONJUGAL E PARÁBOLA DO FILHO PRÓDIGO."
												 ajax="true" update="exibiPDF"/>
								<p:commandButton id="btnImprimirDesenhos" action="#{eccBean.imprimirDesenhos}"
												 oncomplete="PF('exibiPDF').show()"
												 disabled="#{eccBean.habilitaBotaoImprimirDesenhos}"
												 icon="ui-icon-print" value="Anexo25" style="margin-left: 5px;"
												 title="Imprime o desenho dos Cartazes."
												 ajax="true" update="exibiPDF"/>
								<p:commandButton id="btnImprimirSemeador" action="#{eccBean.imprimirSemeador}"
												 oncomplete="PF('exibiPDF').show()"
												 disabled="#{eccBean.habilitaBotaoImprimirSemeador}"
												 icon="ui-icon-print" value="Anexo26" style="margin-left: 5px;"
												 title="Imprime o Círculo de Estudo O SEMEADOR."
												 ajax="true" update="exibiPDF"/>
								<p:commandButton id="btnImprimirDirigentes" action="#{eccBean.imprimirDirigentes}"
												 oncomplete="PF('exibiPDF').show()"
												 disabled="#{eccBean.habilitaBotaoImprimirDirigentes}"
												 icon="ui-icon-print" value="Anexo27" style="margin-left: 5px;"
												 title="Imprime a relação dos Dirigentes.."
												 ajax="true" update="exibiPDF"/>
								<p:commandButton id="btnImprimirEquipes" action="#{eccBean.imprimirEquipes}"
												 oncomplete="PF('exibiPDF').show()"
												 disabled="#{eccBean.habilitaBotaoImprimirEquipes}"
												 icon="ui-icon-print" value="Anexo27" style="margin-left: 5px;"
												 title="Imprime a relação das Equipes."
												 ajax="true" update="exibiPDF"/>
								<p:commandButton id="btnImprimirPalestrantes" action="#{eccBean.imprimirPalestrantes}"
												 oncomplete="PF('exibiPDF').show()"
												 disabled="#{eccBean.habilitaBotaoImprimirPalestrantes}"
												 icon="ui-icon-print" value="Anexo28" style="margin-left: 5px;"
												 title="Imprime a relação dos Palestrantes."
												 ajax="true" update="exibiPDF"/>
							</h:panelGroup>
						</h:panelGrid>

					</f:facet>
					<p:ajax event="rowSelect"
							listener="#{eccBean.onRowSelectEcc}"
							update="btnEditar btnExcluir btnIncluiDirigentes btnDetalhes btnEncerrar btnImprimirConvite btnImprimirPrece btnImprimirEncontristas btnImprimirDirigentes btnImprimirEquipes btnImprimirPalestrantes btnImprimirDesenhos btnImprimirHarmoniaEParabola btnImprimirSemeador" />
					<p:column width="30">
						<f:facet name="header">Número</f:facet>
						#{ecc.numero}
						<h:graphicImage library="imagens" name="cadeado.png" width="15" height="15" rendered="#{ecc.situacao eq 'ENCERRADO'}"
										style="float: right;" title="Encerrado"/>
					</p:column>
					<p:column headerText="Tema" width="300">
						<p:outputLabel value="#{ecc.tema}"/>
					</p:column>
					<p:column headerText="Local" width="100">
						<p:outputLabel value="#{ecc.local}"/>
					</p:column>
					<p:column headerText="Diretor Espiritual" width="150">
						<p:outputLabel value="#{ecc.diretorEspiritual}"/>
					</p:column>

					<p:column width="50" headerText="Dirigentes">
						#{ecc.dirigentes.size()}
						<h:graphicImage library="imagens" name="dirigentes2.png" width="15" height="15" rendered="#{ecc.dirigentes.size() > 0}"
										style="float: right;" title="Dirigentes"/>
					</p:column>
					<p:column headerText="Total" width="20">
						<p:outputLabel value="#{ecc.total}"/>
					</p:column>
					<p:column headerText="Data Início" width="50">
						<p:outputLabel value="#{ecc.dataInicio}">
							<f:convertDateTime dateStyle="medium" pattern="dd/MM/yyyy" />
						</p:outputLabel>
					</p:column>
					<p:column headerText="Data Fim" width="50">
						<p:outputLabel value="#{ecc.dataFim}">
							<f:convertDateTime dateStyle="medium" pattern="dd/MM/yyyy" />
						</p:outputLabel>
					</p:column>
				</p:dataTable>
		<!-- ======================================================================= -->
		<!-- Caixa de diálogo para confirmar exclusão do ECC				         -->
		<!-- ======================================================================= -->
		<p:confirmDialog header="Excluir ECC"
						 message="Confirmar a exclusão do ECC com número #{eccBean.ecc.numero}?"
						 widgetVar="confirmacaoExclusao" id="confirmacaoExclusaoDialog">
			<p:commandButton value="Sim"
							 onclick="PF('confirmacaoExclusao').hide();"
							 action="#{eccBean.excluirEcc()}" update="eccs" />
			<p:button value="Não"
					  onclick="PF('confirmacaoExclusao').hide(); return false;" />
		</p:confirmDialog>

		<!-- ======================================================================= -->
		<!-- Caixa de diálogo para confirmaço de ENCERRAMENTO do ECC		         -->
		<!-- ======================================================================= -->
		<p:confirmDialog header="Encerrar ECC"
						 message="Confirmar o encerramento do ECC com número #{eccBean.ecc.numero}?"
						 widgetVar="confirmacaoEncerrar" id="confirmacaoEncerrarDialog">
			<p:commandButton value="Sim"
							 onclick="PF('confirmacaoEncerrar').hide();"
							 action="#{eccBean.encerrarEcc()}" update="eccs" />
			<p:button value="Não"
					  onclick="PF('confirmacaoEncerrar').hide(); return false;" />
		</p:confirmDialog>
	</h:form>
		<!-- ==================================================================================== -->
		<!-- ========================= Diálogo para cadastrar novo ECC ========================== -->
		<!-- ==================================================================================== -->
		<p:dialog id="dialogNovoEcc" header="Lançar novo ECC"
				  modal="true" widgetVar="dlgNovoEcc"
				  style="background-color:#EBF3FE" resizable="false" width="560px"
				  height="364px">
			<h:form id="cadNovoEcc">
				<p:panel id="panelDadosEcc" style="background-color: #ffffe6">
						<h:message />
						<h:inputHidden value="#{eccBean.ecc.id}" />
						<h:panelGrid columns="3">
							<h:outputLabel value="Número" for="numero" />
							<h:outputLabel value="Local" for="local"/>
							<h:outputLabel value="Total" for="total" />
							<p:inputText id="numero" value="#{eccBean.ecc.numero}"
										 required="true" requiredMessage="O campo Número do ECC é obrigatório"
										 maxlength="10" style="width:35px;">
							</p:inputText>
							<p:inputText id="local" value="#{eccBean.ecc.local}"
										 required="true" requiredMessage="O campo Local é obrigatório"
										 maxlength="100" style="width:350px;">
								<p:focus for="numero" />
							</p:inputText>
							<p:inputText id="total" value="#{eccBean.ecc.total}"
										 required="true" requiredMessage="O campo Total é obrigatório"
										 maxlength="5" style="width:45px;">
							</p:inputText>
						</h:panelGrid>
						<h:panelGrid columns="1">
							<h:outputLabel value="Tema" for="tema" />
							<p:inputText id="tema" value="#{eccBean.ecc.tema}"
										 required="true" requiredMessage="O campo Tema é obrigatório"
										 maxlength="200" style="width:459px;">
							</p:inputText>
						</h:panelGrid>
						<h:panelGrid columns="2">
							<h:outputLabel value="Diretor Espiritual" for="diretorEspiritual" />
							<h:outputLabel value="Telefone Diretor" for="telefoneDiretor" />
							<p:inputText id="diretorEspiritual" value="#{eccBean.ecc.diretorEspiritual}"
										 required="true" requiredMessage="O campo Diretor Espiritual é obrigatório"
										 maxlength="50" style="width:287px;">
							</p:inputText>
							<p:inputText id="telefoneDiretor" value="#{eccBean.ecc.telefoneDiretor}"
										 required="true" requiredMessage="O campo Telefone é obrigatório"
										 maxlength="30" style="width:158px;">
							</p:inputText>
						</h:panelGrid>
						<h:panelGrid columns="1">
							<h:outputLabel value="Endereço Diretor" for="enderecoDiretor" />
							<p:inputText id="enderecoDiretor" value="#{eccBean.ecc.enderecoDiretor}"
										 required="true" requiredMessage="O campo Endereço é obrigatório"
										 maxlength="60" style="width:459px;">
							</p:inputText>
						</h:panelGrid>
						<h:panelGrid columns="3">
							<h:outputLabel value="Data Início" for="inicio" />
							<h:outputLabel value="Data Fim" for="fim" />
							<h:outputLabel value="Situação" for="situacao" />
							<p:calendar id="inicio" mask="99/99/9999"
										required="true" requiredMessage="O Campo Data Início é obrigatório"
										value="#{eccBean.ecc.dataInicio}"
										pattern="dd/MM/yyyy"/>
							<p:calendar id="fim" mask="99/99/9999"
										required="true" requiredMessage="O Campo Data Fim é obrigatório"
										value="#{eccBean.ecc.dataFim}"
										pattern="dd/MM/yyyy"/>
							<p:selectOneMenu id="situacao" disabled="true"
											 value="#{eccBean.ecc.situacao}"
											 required="true" requiredMessage="O campo Situação é obrigatório" style="width:118px;">
								<f:selectItem itemLabel="Selecione" noSelectionOption="true" />
								<f:selectItem itemValue="ANDAMENTO" itemLabel="ANDAMENTO" />
								<f:selectItem itemValue="ENCERRADO" itemLabel="ENCERRADO" />
							</p:selectOneMenu>
							<p:selectBooleanCheckbox value="#{eccBean.ecc.automatico}" itemLabel="Automático?" style="margin-left:5px;" />
						</h:panelGrid>
						<h:panelGrid columns="2">
							<h:outputLabel value="Data Depoimento" for="dataDepoimento" />
							<h:outputLabel value="Hora" for="horaDepoimento" />
							<p:calendar id="dataDepoimento" mask="99/99/9999"
										required="true" requiredMessage="O Campo Data do Depoimento é obrigatório"
										value="#{eccBean.ecc.dataDepoimento}"
										pattern="dd/MM/yyyy"/>
							<p:inputText id="horaDepoimento" value="#{eccBean.ecc.horaDepoimento}"
										 required="true" requiredMessage="O campo Hora do Depoimento é obrigatório"
										 maxlength="7" style="width:50px;">
							</p:inputText>
						</h:panelGrid>
						<h:panelGrid columns="2">
							<h:outputLabel value="" />
							<p:commandButton value="Salvar" action="#{eccBean.salvarEcc()}"
											 update=":listagemEccs @form" oncomplete="if(!args.validationFailed){PF('dlgNovoEcc').hide();}"
											 icon="ui-icon-disk" process="@form">
							</p:commandButton>
						</h:panelGrid>
				</p:panel>
			</h:form>
		</p:dialog>
		<!-- ==================================================================================== -->
		<!-- ========================= Diálogo para alterar um ECC ============================== -->
		<!-- ==================================================================================== -->
		<p:dialog id="dialogEditarEcc" header="Alterar ECC"
				  modal="true" widgetVar="dlgEditarEcc"
				  style="background-color:#EBF3FE" resizable="false" width="560px"
				  height="364px">
			<h:form id="cadEditarEcc">
				<p:panel id="panelEditarEcc" style="background-color: #ffffe6">
						<h:message />
						<h:inputHidden value="#{eccBean.ecc.id}" />
						<h:panelGrid columns="3">
							<h:outputLabel value="Número" for="numero" />
							<h:outputLabel value="Local" for="local"/>
							<h:outputLabel value="Total" for="total" />
							<p:inputText id="numero" value="#{eccBean.ecc.numero}"
										 required="true" requiredMessage="O campo Número do ECC é obrigatório"
										 maxlength="10" style="width:35px;">
							</p:inputText>
							<p:inputText id="local" value="#{eccBean.ecc.local}"
										 required="true" requiredMessage="O campo Local é obrigatório"
										 maxlength="100" style="width:350px;">
								<p:focus for="numero" />
							</p:inputText>
							<p:inputText id="total" value="#{eccBean.ecc.total}"
										 required="true" requiredMessage="O campo Total é obrigatório"
										 maxlength="5" style="width:45px;">
							</p:inputText>
						</h:panelGrid>
						<h:panelGrid columns="1">
							<h:outputLabel value="Tema" for="tema" />
							<p:inputText id="tema" value="#{eccBean.ecc.tema}"
										 required="true" requiredMessage="O campo Tema é obrigatório"
										 maxlength="200" style="width:458px;">
							</p:inputText>
						</h:panelGrid>
						<h:panelGrid columns="2">
							<h:outputLabel value="Diretor Espiritual" for="diretorEspiritual" />
							<h:outputLabel value="Telefone Diretor" for="telefoneDiretor" />
							<p:inputText id="diretorEspiritual" value="#{eccBean.ecc.diretorEspiritual}"
										 required="true" requiredMessage="O campo Diretor Espiritual é obrigatório"
										 maxlength="50" style="width:287px;">
							</p:inputText>
							<p:inputText id="telefoneDiretor" value="#{eccBean.ecc.telefoneDiretor}"
										 required="true" requiredMessage="O campo Telefone é obrigatório"
										 maxlength="30" style="width:158px;">
							</p:inputText>
						</h:panelGrid>
						<h:panelGrid columns="1">
							<h:outputLabel value="Endereço Diretor" for="enderecoDiretor" />
							<p:inputText id="enderecoDiretor" value="#{eccBean.ecc.enderecoDiretor}"
										 required="true" requiredMessage="O campo Endereço é obrigatório"
										 maxlength="60" style="width:459px;">
							</p:inputText>
						</h:panelGrid>
						<h:panelGrid columns="3">
							<h:outputLabel value="Data Início" for="inicio" />
							<h:outputLabel value="Data Fim" for="fim" />
							<h:outputLabel value="Situação" for="situacao" />
							<p:calendar id="inicio" mask="99/99/9999"
										required="true" requiredMessage="O Campo Data Início é obrigatório"
										value="#{eccBean.ecc.dataInicio}"
										pattern="dd/MM/yyyy"/>
							<p:calendar id="fim" mask="99/99/9999"
										required="true" requiredMessage="O Campo Data Fim é obrigatório"
										value="#{eccBean.ecc.dataFim}"
										pattern="dd/MM/yyyy"/>
							<p:selectOneMenu id="situacao" rendered="#{contextoBean.usuarioLogado.perfil eq 'Administrador'}"
											 value="#{eccBean.ecc.situacao}"
											 required="true" requiredMessage="O campo Situação é obrigatório" style="width:118px;">
								<f:selectItem itemLabel="Selecione" noSelectionOption="true" />
								<f:selectItem itemValue="ANDAMENTO" itemLabel="ANDAMENTO" />
								<f:selectItem itemValue="ENCERRADO" itemLabel="ENCERRADO" />
							</p:selectOneMenu>
							<p:selectBooleanCheckbox value="#{eccBean.ecc.automatico}" itemLabel="Automático?" style="margin-left:5px;" />
						</h:panelGrid>
					<h:panelGrid columns="2">
						<h:outputLabel value="Data Depoimento" for="dataDepoimento" />
						<h:outputLabel value="Hora" for="horaDepoimento" />
						<p:calendar id="dataDepoimento" mask="99/99/9999"
									required="true" requiredMessage="O Campo Data do Depoimento é obrigatório"
									value="#{eccBean.ecc.dataDepoimento}"
									pattern="dd/MM/yyyy"/>
						<p:inputText id="horaDepoimento" value="#{eccBean.ecc.horaDepoimento}"
									 required="true" requiredMessage="O campo Hora do Depoimento é obrigatório"
									 maxlength="7" style="width:50px;">
						</p:inputText>
					</h:panelGrid>
					<h:panelGrid columns="2">
						<h:outputLabel value="" />
						<p:commandButton value="Alterar" style="margin-left: 10px;"
										 action="#{eccBean.alterarEcc()}" icon="ui-icon-check"
										 update=":listagemEccs @form" process="@form"
										 oncomplete="if(!args.validationFailed){PF('dlgEditarEcc').hide();}" />
					</h:panelGrid>
				</p:panel>
			</h:form>
		</p:dialog>
		<!-- ==================================================================================== -->
		<!-- ========================= Diálogo para incluir Dirigentes ========================== -->
		<!-- ==================================================================================== -->
		<p:dialog id="dialogNovosDirigentes" header="Lançar Equipe de Dirigentes"
				  modal="true" widgetVar="dlgNovosDirigentes"
				  style="background-color:#EBF3FE" resizable="false" width="920px"
				  height="564px">
			<h:form id="cadNovosDirigentes">
				<h:message />
				<p:panel id="panelDadosDirigentes" style="background-color: #ffffe6">
					<h:inputHidden value="#{eccBean.ecc.id}" />
					<p:panel id="basic"
							 style="background-color:#EBF3FE; width:766px;"
							 visible="true">
						<p:outputLabel
								value="ECC nº #{eccBean.ecc.numero} - Tema: #{eccBean.ecc.tema}"
								styleClass="negrito" style="margin-left:5px;" />
					</p:panel>
					<h:panelGrid columns="3">
						<h:outputLabel value="Nome do Casal" for="casal" />
						<h:outputLabel value="Equipe" for="equipe" />
						<h:outputLabel value="" />
						<p:selectOneMenu id="casal" value="#{eccBean.casal}"
										 required="true"
										 requiredMessage="Selecione o casal."
										 style="width:435px" converter="fichaConverter"
										 filter="true" filterMatchMode="contains">
							<f:selectItem itemLabel="Selecione o casal" noSelectionOption="true" />
							<f:selectItems value="#{fichaBean.listaEncontreiros}"
										   var="casal" itemValue="#{casal}"
										   itemLabel="#{casal.primeiraEtapa} - #{casal.nomeUsual}" />
						</p:selectOneMenu>

						<p:selectOneMenu id="equipe" converter="equipeConverter"
										 required="true"
										 requiredMessage="Selecione a Equipe."
										 value="#{eccBean.equipe}" style="width:280px"
										 filter="true" filterMatchMode="contains">
							<f:selectItem itemLabel="Selecione a equipe" noSelectionOption="true" />
							<f:selectItems value="#{equipeBean.listaDirigentes}"
										   var="equipe" itemValue="#{equipe}"
										   itemLabel="#{equipe.descricao}" />
						</p:selectOneMenu>
						<p:commandButton process="@this, casal, equipe" value="Incluir" rendered="#{eccBean.ecc.situacao eq 'ANDAMENTO'}"
										 style="margin-left:10px;"
										 action="#{eccBean.salvaDirigente()}" icon="ui-icon-check"
										 title="Incluir um novo dirigente..."
										 update="casal, equipe, cadNovosDirigentes:tabelaDirigentes, listagemEccs:eccs">
						</p:commandButton>
					</h:panelGrid>
					<h:panelGrid>
						<p:panel id="informacao"
								 style="background-color:#EBF3FE; width:765px;"
								 visible="true">
							<p:outputLabel
									value="Equipes (Dirigentes, Sala e Supervisor de Círculo)"
									styleClass="negrito" style="margin-left:5px;" />
						</p:panel>
					</h:panelGrid>
					<h:panelGrid columns="3">
						<p:dataTable id="tabelaDirigentes"
									 style="margin-right: 10px; width:771px;"
									 value="#{eccBean.ecc.dirigentes}" var="dirigente"
									 emptyMessage="Não há Dirigentes cadastrados" rowIndexVar="index">
							<f:facet name="header">
								<p:outputLabel value="Total de Dirigentes - #{eccBean.ecc.dirigentes.size()}" />
							</f:facet>
								<p:column headerText="Casal" width="200">
									<p:outputLabel value="#{dirigente.ficha.primeiraEtapa} - #{dirigente.ficha.nomeUsual}" />
									<h:graphicImage library="imagens" name="coordenador.png" width="15" height="15" rendered="#{dirigente.equipe.descricao eq 'COORDENADOR GERAL'}"
													style="float: right;" title="Coordenador Geral"/>
									<h:graphicImage library="imagens" name="dirigente.png" width="15" height="15" rendered="#{dirigente.equipe.descricao eq 'MONTAGEM'
											or dirigente.equipe.descricao eq 'FICHA' or dirigente.equipe.descricao eq 'FINANÇAS'
											or dirigente.equipe.descricao eq 'RECEPÇÃO DE PALESTRA/PALESTRA'
											or dirigente.equipe.descricao eq 'PÓS ENCONTRO'}"
													style="float: right;" title="Equipe Dirigente"/>
									<h:graphicImage library="imagens" value="/image?imagem=#{dirigente.ficha.fotoEla}" rendered="#{dirigente.ficha.fotoEla.length() > 0}"
													style="width:20px; height:20px; float: right;" title="Foto dela"/>
									<h:graphicImage library="imagens" value="/image?imagem=#{dirigente.ficha.fotoEle}" rendered="#{dirigente.ficha.fotoEle.length() > 0}"
													style="width:20px; height:20px; float: right;" title="Foto dele"/>
								</p:column>
								<p:column headerText="Equipe" width="200">
									<p:outputLabel value="#{dirigente.equipe.descricao}" />
								</p:column>
								<p:column headerText="Excluir" styleClass="Gildasio" width="40" rendered="#{eccBean.ecc.situacao eq 'ANDAMENTO'}">
									<p:commandLink update=":cadNovosDirigentes:tabelaDirigentes, listagemEccs:eccs"
												   process="@this" action="#{eccBean.removeDirigente()}">
										<h:graphicImage library="imagens" name="remover.png" />
										<f:setPropertyActionListener target="#{eccBean.dirigenteEcc}"
																	 value="#{dirigente}" />
									</p:commandLink>
								</p:column>
						</p:dataTable>
					</h:panelGrid>

				</p:panel>
			</h:form>
		</p:dialog>
		<p:dialog widgetVar="statusDialog" modal="true" draggable="false"
				  closable="false" resizable="false" showHeader="false" width="250px">
			<div id="divLoadingFora">
				<div id="divLoadingEsquerda">
					<h:graphicImage library="imagens" name="SLG.ico" width="60" height="60" />
				</div>
				<div id="divLoadingDireita">
					<h:outputLabel value="Processando..." />
					<h:graphicImage library="imagens" name="barra.gif" />
				</div>
			</div>
		</p:dialog>
		<p:dialog widgetVar="exibiPDF" id="exibiPDF" modal="true" draggable="false"
				  closable="true" resizable="false" showHeader="true" width="1200px" height="760">
			<pe:documentViewer id = "fileUpload"
								   height="800" url="${eccBean.urlRelatorio}"/>
		</p:dialog>
</h:body>
</html>