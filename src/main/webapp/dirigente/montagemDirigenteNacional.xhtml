<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">

<h:head>
	<title>ECC-SLG</title>
	<link rel="shortcut icon" href="../resources/imagens/SLG.ico" />
	<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" />
	<h:outputScript library="js" name="locale-primefaces.js" />
	<h:outputScript library="js" name="bootstrap.min.js" />

	<h:outputStylesheet library="css" name="modelo.css" />
	<h:outputStylesheet library="css" name="menu.css" />
	<h:outputStylesheet library="css" name="AdminLTE.css" />
	<h:outputStylesheet library="css" name="font-awesome.min.css" />
</h:head>

<h:body style="background-color:#EBF3FE">
	<h:form id="listagemDirigenteNacionalEcc">
		<div id="menubar">
			<li class="icone"><h:graphicImage library="imagens" name="logo_ECC.png" width="400" height="72" /></li>
			<ul>
				<li><a href="../publico/estatistica.xhtml">
					<h:graphicImage library="imagens/menu"
									style="width:35px; height:35px;" name="estatisticas.png" />Indicadores
				</a></li>
				<h:panelGroup rendered="#{contextoBean.usuarioLogado.perfil eq 'Administrador'}">
					<li>
						<a><h:graphicImage library="imagens/menu"
										   style="width:35px; height:35px;" name="cadastros.png" />Cadastros</a>
						<ul>
							<li><h:graphicImage library="imagens/menu"
												style="width:30px; height:30px;
								margin-left:10px; margin-top:8px; margin-right:9px;"
												name="circulos.png" /><a
									href="../administrador/circulo.xhtml">Circulos</a>
							</li>

							<li><h:graphicImage library="imagens/menu"
												style="width:30px; height:30px;
								margin-left:10px; margin-top:8px; margin-right:9px;"
												name="palestras.png" /><a
									href="../administrador/palestra.xhtml">Palestras</a>
							</li>
							<li><h:graphicImage library="imagens/menu"
												style="width:30px; height:30px;
								margin-left:10px; margin-top:8px; margin-right:9px;"
												name="equipes.png" /><a
									href="../administrador/equipe.xhtml">Equipes</a>
							</li>
							<li><h:graphicImage library="imagens/menu"
												style="width:30px; height:30px;
								margin-left:10px; margin-top:8px; margin-right:9px;"
												name="usuarios.png" /><a
									href="../administrador/usuario.xhtml">Usuários</a>
							</li>
						</ul>
					</li>
				</h:panelGroup>
				<li><a><h:graphicImage library="imagens/menu"
									   style="width:35px; height:35px;" name="montagem.png" />Montagem</a>
					<ul>
						<li><h:graphicImage library="imagens/menu"
											style="width:30px; height:30px;
								margin-left:10px; margin-top:8px; margin-right:9px;"
											name="ecc.png" /><a
								href="ecc.xhtml">ECC</a>
						</li>
						<li><h:graphicImage library="imagens/menu"
											style="width:30px; height:30px;
								margin-left:10px; margin-top:8px; margin-right:9px;"
											name="fichas.png" />
							<a href="montagemFicha.xhtml">Fichas </a>
						</li>
						<li><h:graphicImage library="imagens/menu"
											style="width:30px; height:30px;
								margin-left:10px; margin-top:8px; margin-right:9px;"
											name="montagemEquipes.png" />
							<a href="../dirigente/montagemEquipe.xhtml">Equipes</a>
						</li>
						<li><h:graphicImage library="imagens/menu"
											style="width:30px; height:30px;
								margin-left:10px; margin-top:8px; margin-right:9px;"
											name="montagemCasais.png" />
							<a href="../dirigente/montagemEncontrista.xhtml">Encontristas</a>
						</li>
						<li><h:graphicImage library="imagens/menu"
											style="width:30px; height:30px;
								margin-left:10px; margin-top:8px; margin-right:9px;"
											name="montagemPalestrantes.png" />
							<a href="montagemPalestrante.xhtml">Palestrantes</a>
						</li>
						<li><h:graphicImage library="imagens/menu"
											style="width:30px; height:30px;
								margin-left:10px; margin-top:8px; margin-right:9px;"
											name="montagemCirculos.png" /><a
								href="../dirigente/montagemCirculo.xhtml">Círculos</a></li>
						<li><h:graphicImage library="imagens/menu"
											style="width:30px; height:30px;
								margin-left:10px; margin-top:8px; margin-right:9px;"
											name="montagemCirculosEstudos.png" />
							<a href="../dirigente/montagemCirculo.xhtml">Círculos de Estudos</a></li>
						<li><h:graphicImage library="imagens/menu"
											style="width:30px; height:30px;
								margin-left:10px; margin-top:8px; margin-right:9px;"
											name="dirigenteNacional.png" />
							<a style="color: #808080; background: #a0c0de; opacity: 1;
							filter: alpha(opacity = 100); border-bottom: 3px solid #b1b1b1;">Dirigente Nacional</a>
						</li>
					</ul>
				</li>
			</ul>
		</div>
		<div id="status" style="...">
			<div id="ico">
				<h1>
					<h:graphicImage library="imagens/menu" name="dirigenteNacional.png"
									width="25px" height="25px" />
					<h5>
						<b>Dirigente Nacional</b>
					</h5>
					<p:commandButton type="button" value="Sair" icon="ui-icon-extlink"
									 style="float: right; margin-right:5px; margin-top: -5px;"
									 onclick="document.location='#{request.contextPath}/j_spring_security_logout'" />
				</h1>
			</div>
			<div id="img-usuario-logado">
				<h5>Usuário logado: #{contextoBean.usuarioLogado.nome}</h5>
				<h1>
					<h:graphicImage library="imagens/menu" name="usuarioLogado.png"
									width="25px" height="25px" />
				</h1>
			</div>
		</div>
		<br />
		<p:ajaxStatus onstart="PF('statusDialog').show()" onsuccess="PF('statusDialog').hide()" />

		<p:growl id="growl" showDetail="false" life="4000" autoUpdate="true" />
		<br />
		<p:toolbar>
			<f:facet name="left">
				<h:panelGrid columns="5">
					<p:outputLabel value="ECC:" />
					<p:selectOneMenu id="lbECC" value="#{dirigenteNacionalEccBean.idEcc}" converter="eccConverter"
									 style="width:110px;">
						<f:selectItem itemLabel="Selecione o ECC." noSelectionOption="true"/>
						<f:selectItems value="#{eccBean.listaEcc}"
									   var="ecc" itemValue="#{ecc}" itemLabel="#{ecc.numero}"/>
					</p:selectOneMenu>
					<p:selectOneButton style="margin-left:5px;" id="statusECC"
									   value="#{dirigenteNacionalEccBean.statusEcc}">
						<f:selectItem itemLabel="TODOS" itemValue="TODOS" />
						<f:selectItem itemLabel="ANDAMENTO" itemValue="ANDAMENTO" />
						<f:selectItem itemLabel="ENCERRADO" itemValue="ENCERRADO" />
					</p:selectOneButton >
					<p:commandButton icon="ui-icon-search" update="dirigenteNacionalEcc" process="@this statusECC lbECC"
									 action="#{dirigenteNacionalEccBean.filtraDirigenteNacionalEcc()}"/>
				</h:panelGrid>
			</f:facet>
		</p:toolbar>
				<p:dataTable id="dirigenteNacionalEcc" value="#{dirigenteNacionalEccBean.listaUltimoDirigenteNacional}" var="dirigenteNacionalEcc" rowIndexVar="index" selection="#{dirigenteNacionalEccBean.dirigenteNacionalEcc}"
							 selectionMode="single" rowKey="#{dirigenteNacionalEcc.id}"
							 emptyMessage="Não há Dirigentes Nacionais cadastrados" style="width:100%;"
							 paginator="false" paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
							 rowsPerPageTemplate="14,28,42,56,70" paginatorPosition="top"
							 currentPageReportTemplate="Registro(s) {startRecord} a {endRecord} de um total de {totalRecords} - Página {currentPage} de {totalPages}">
					<f:facet name="header">
						<h:panelGrid columns="2" styleClass="semBordaInterna"
									 columnClasses="tituloGridSolicitacao, botoesGridSolicitacao">
							<p:outputLabel value="Dirigentes Nacionais Cadastrados"
										   style="float:left;" />
							<h:panelGroup style="float:right;">
								<p:commandButton action="#{dirigenteNacionalEccBean.novoDirigenteNacional}"
												 icon="ui-icon-document" value="Novo Dirigente Nacional"
												 onclick="PF('dlgNovoDirigenteNacionalEcc').show()" update=":cadNovoDirigenteNacionalEcc"
												 process="@this"
												 style="margin-right:15px; background-color:#a0c0de;"/>
								<p:commandButton id="btnEditar" value="Editar"
												 icon="ui-icon-pencil" style="margin-left: 5px;"
												 onclick="PF('dlgEditarDirigenteNacionalEcc').show()" update=":cadEditarDirigenteNacionalEcc"
												 title="Altera as informações do Dirigente Nacional selecionado."
												 disabled="#{dirigenteNacionalEccBean.habilitaBotaoEditarDirigenteNacionalEcc}"/>
								<p:commandButton id="btnExcluir" value="Excluir"
												 icon="ui-icon-trash" style="margin-left: 5px;"
												 disabled="#{dirigenteNacionalEccBean.habilitaBotaoExcluirDirigenteNacionalEcc}"
												 title="Remove o Dirigente Nacional selecionado."
												 oncomplete="PF('confirmacaoExclusao').show()" immediate="true"
												 process="@this"
												 update=":listagemDirigenteNacionalEcc:confirmacaoExclusaoDialog"/>
							</h:panelGroup>
						</h:panelGrid>
					</f:facet>
					<p:ajax event="rowSelect"
							listener="#{dirigenteNacionalEccBean.onRowSelectDirenteNacionalEcc}"
							update="btnEditar btnExcluir" />
					<p:column width="30">
						<f:facet name="header">Número</f:facet>
						#{dirigenteNacionalEcc.ecc.numero}
						<h:graphicImage library="imagens" name="cadeado.png" width="15" height="15" rendered="#{dirigenteNacionalEcc.ecc.situacao eq 'ENCERRADO'}"
										style="float: right;" title="Encerrado"/>
					</p:column>
					<p:column headerText="Tipo" width="200">
						<p:outputLabel value="#{dirigenteNacionalEcc.tipo}"/>
					</p:column>
					<p:column headerText="Dados" width="400">
						<p:outputLabel value="#{dirigenteNacionalEcc.descricao}"/>
					</p:column>
				</p:dataTable>
		<!-- ======================================================================= -->
		<!-- Caixa de diálogo para confirmar exclusão do Círculo de Estudo	         -->
		<!-- ======================================================================= -->
		<p:confirmDialog header="Excluir Diritente Nacional"
						 message="Confirmar a exclusão do Dirigente Nacional #{dirigenteNacionalEccBean.dirigenteNacionalEcc.tipo} ?"
						 widgetVar="confirmacaoExclusao" id="confirmacaoExclusaoDialog">
			<p:commandButton value="Sim"
							 onclick="PF('confirmacaoExclusao').hide();"
							 action="#{dirigenteNacionalEccBean.excluirDirigenteNacional()}" update="dirigenteNacionalEcc" />
			<p:button value="Não"
					  onclick="PF('confirmacaoExclusao').hide(); return false;" />
		</p:confirmDialog>
	</h:form>
		<!-- ==================================================================================== -->
		<!-- ================== Diálogo para cadastrar novo Dirigente Nacional ================== -->
		<!-- ==================================================================================== -->
		<p:dialog id="dialogNovoDirigenteNacionalEcc" header="Lançar novo Dirigente Nacional"
				  modal="true" widgetVar="dlgNovoDirigenteNacionalEcc"
				  style="background-color:#EBF3FE" resizable="false" width="590px"
				  height="270px">

			<h:form id="cadNovoDirigenteNacionalEcc">
				<p:panel id="panelDadosDirigenteNacionalEcc" style="background-color: #ffffe6">
						<h:message />
						<h:inputHidden value="#{dirigenteNacionalEccBean.dirigenteNacionalEcc.id}" />
						<p:focus for="ecc" />
						<h:panelGrid columns="2">
							<h:outputLabel value="ECC" for="ecc" />
							<h:outputLabel value="Tipo" for="tipo"/>
							<p:selectOneMenu id="ecc" value="#{dirigenteNacionalEccBean.ecc}"
											 required="true"
											 requiredMessage="Selecione o ECC."
											 style="width:105px" converter="eccConverter"
											 filter="true">
								<f:selectItem itemLabel="Selecione o ECC" noSelectionOption="true" />
								<f:selectItems value="#{eccBean.listarEccAtivoEncerradoNao}"
											   var="ecc" itemValue="#{ecc}"
											   itemLabel="#{ecc.numero}" />
							</p:selectOneMenu>
							<p:selectOneMenu id="tipo" required="true" requiredMessage="Selecione o Tipo."
											 value="#{dirigenteNacionalEccBean.dirigenteNacionalEcc.tipo}" style="width:368px;">
								<f:selectItem itemLabel="Selecione" noSelectionOption="true" />
								<f:selectItem itemValue="ASSISTENTE ECLESIASTICO NACIONAL DO ECC" itemLabel="ASSISTENTE ECLESIASTICO NACIONAL DO ECC" />
								<f:selectItem itemValue="CASAIS DA SECRETARIA NACIONAL DO ECC" itemLabel="CASAIS DA SECRETARIA NACIONAL DO ECC" />
								<f:selectItem itemValue="DIRETOR ESPIRITUAL DO CONSELHO REGIONAL" itemLabel="DIRETOR ESPIRITUAL DO CONSELHO REGIONAL" />
								<f:selectItem itemValue="CASAL DO CONSELHO REGIONAL" itemLabel="CASAL DO CONSELHO REGIONAL" />
								<f:selectItem itemValue="BISPO (ARQUI)DIOCESANO" itemLabel="BISPO ARQUIDIOCESANO" />
								<f:selectItem itemValue="DIRETOR ESPIRITUAL (ARQUI)DIOCESANO" itemLabel="DIRETOR ESPIRITUAL (ARQUI)DIOCESANO" />
								<f:selectItem itemValue="CASAL (ARQUI)DIOCESANO" itemLabel="CASAL (ARQUI)DIOCESANO" />
								<f:selectItem itemValue="CASAL LIGAÇÃO SETORIAL" itemLabel="CASAL LIGAÇÃO SETORIAL" />
							</p:selectOneMenu>
						</h:panelGrid>
						<h:panelGrid columns="1">
							<h:panelGrid columns="1">
								<h:outputLabel value="Dados" for="dados" />
								<p:inputTextarea id="dados" rows="8" cols="72" value="#{dirigenteNacionalEccBean.dirigenteNacionalEcc.descricao}"/>
							</h:panelGrid>
						</h:panelGrid>
						<h:panelGrid columns="2">
							<h:outputLabel value="" />
							<p:commandButton value="Salvar" action="#{dirigenteNacionalEccBean.salvarDirigenteNacional}"
											 update=":listagemDirigenteNacionalEcc @form" oncomplete="if(!args.validationFailed){PF('dlgNovoDirigenteNacionalEcc').hide();}"
											 icon="ui-icon-disk" process="@form">
							</p:commandButton>
						</h:panelGrid>
				</p:panel>
			</h:form>
		</p:dialog>
		<!-- ==================================================================================== -->
		<!-- ================ Diálogo para alterar um Dirigente Nacional ======================== -->
		<!-- ==================================================================================== -->
		<p:dialog id="dialogEditarDirigenteNacionalEcc" header="Alterar Dirigente Nacional"
				  modal="true" widgetVar="dlgEditarDirigenteNacionalEcc"
				  style="background-color:#EBF3FE" resizable="false" width="590px"
				  height="270px">
			<h:form id="cadEditarDirigenteNacionalEcc">
				<p:panel id="panelEditarDirigenteNacionalEcc" style="background-color: #ffffe6">
					<h:message />
					<h:inputHidden value="#{circuloEstudoEccBean.circuloEstudoEcc.id}" />
					<p:focus for="ecc" />
					<h:panelGrid columns="2">
						<h:outputLabel value="ECC" for="ecc" />
						<h:outputLabel value="Tipo" for="tipo"/>
						<p:selectOneMenu id="ecc" value="#{dirigenteNacionalEccBean.dirigenteNacionalEcc.ecc}"
										 required="true"
										 requiredMessage="Selecione o ECC."
										 style="width:105px" converter="eccConverter"
										 filter="true">
							<f:selectItem itemLabel="Selecione o ECC" noSelectionOption="true" />
							<f:selectItems value="#{eccBean.listarEccAtivoEncerradoNao}"
										   var="ecc" itemValue="#{ecc}"
										   itemLabel="#{ecc.numero}" />
						</p:selectOneMenu>
						<p:selectOneMenu id="tipo" required="true" requiredMessage="Selecione o Tipo."
										 value="#{dirigenteNacionalEccBean.dirigenteNacionalEcc.tipo}" style="width:368px;">
							<f:selectItem itemLabel="Selecione" noSelectionOption="true" />
							<f:selectItem itemValue="ASSISTENTE ECLESIASTICO NACIONAL DO ECC" itemLabel="ASSISTENTE ECLESIASTICO NACIONAL DO ECC" />
							<f:selectItem itemValue="CASAIS DA SECRETARIA NACIONAL DO ECC" itemLabel="CASAIS DA SECRETARIA NACIONAL DO ECC" />
							<f:selectItem itemValue="DIRETOR ESPIRITUAL DO CONSELHO REGIONAL" itemLabel="DIRETOR ESPIRITUAL DO CONSELHO REGIONAL" />
							<f:selectItem itemValue="CASAL DO CONSELHO REGIONAL" itemLabel="CASAL DO CONSELHO REGIONAL" />
							<f:selectItem itemValue="BISPO (ARQUI)DIOCESANO" itemLabel="BISPO ARQUIDIOCESANO" />
							<f:selectItem itemValue="DIRETOR ESPIRITUAL (ARQUI)DIOCESANO" itemLabel="DIRETOR ESPIRITUAL (ARQUI)DIOCESANO" />
							<f:selectItem itemValue="CASAL (ARQUI)DIOCESANO" itemLabel="CASAL (ARQUI)DIOCESANO" />
							<f:selectItem itemValue="CASAL LIGAÇÃO SETORIAL" itemLabel="CASAL LIGAÇÃO SETORIAL" />
						</p:selectOneMenu>
					</h:panelGrid>
					<h:panelGrid columns="1">
							<h:outputLabel value="Dados" for="dados" />
							<p:inputTextarea id="dados" rows="8" cols="72" value="#{dirigenteNacionalEccBean.dirigenteNacionalEcc.descricao}"/>
					</h:panelGrid>
					<h:panelGrid columns="2">
						<h:outputLabel value="" />
						<p:commandButton value="Alterar" action="#{dirigenteNacionalEccBean.alterarDirigenteNacional}"
										 update=":listagemDirigenteNacionalEcc @form" oncomplete="if(!args.validationFailed){PF('dlgEditarDirigenteNacionalEcc').hide();}"
										 icon="ui-icon-disk" process="@form">
						</p:commandButton>
					</h:panelGrid>
				</p:panel>
			</h:form>
		</p:dialog>

		<p:dialog widgetVar="statusDialog" modal="true" draggable="false"
				  closable="false" resizable="false" showHeader="false" width="250px">
			<div id="divLoadingFora">
				<div id="divLoadingEsquerda">
					<h:graphicImage library="imagens" name="SLG.ico" width="60" height="60" />
				</div>
				<div id="divLoadingDireita">
					<h:outputLabel value="Processando..." />
					<h:graphicImage library="imagens" name="barra.gif" />
				</div>
			</div>
		</p:dialog>
</h:body>
</html>