<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:c="http://java.sun.com/jsp/jstl/core">

<h:head>
	<title>ECC-SLG</title>
	<link rel="shortcut icon" href="../resources/imagens/SLG.ico" />
	<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" />
	<h:outputScript library="js" name="locale-primefaces.js" />
	<h:outputScript library="js" name="bootstrap.min.js" />

	<h:outputStylesheet library="css" name="modelo.css" />
	<h:outputStylesheet library="css" name="menu.css" />
	<h:outputStylesheet library="css" name="AdminLTE.css" />
	<h:outputStylesheet library="css" name="font-awesome.min.css" />
</h:head>

<script language="javascript">
	var win = null;
	function novaJanela(pagina,nome,w,h,scroll){
		LeftPosition = (screen.width) ? (screen.width-w)/2 : 0;
		TopPosition = (screen.height) ? (screen.height-h)/2 : 0;
		settings = 'height='+h+',width='+w+',top='+TopPosition+',left='+LeftPosition+',scrollbars='+scroll+',resizable'
		win = window.open(pagina,nome,settings);
	}
</script>
<f:metadata>
	<f:viewAction action="#{estatisticaBean.indicadoresIniciais()}" />
</f:metadata>

<h:body style="background-color:#EBF3FE">
	<h:form id="listagem">
		<div id="menubar">
			<li class="icone"><h:graphicImage library="imagens" name="logo_ECC.png" width="400" height="72" /></li>
			<ul>
				<li><a style="color: #808080; background: #a0c0de; opacity: 1; filter: alpha(opacity = 100);
					border-bottom: 1px solid #a0c0de;">
					<h:graphicImage library="imagens/menu"
									style="width:35px; height:35px;" name="estatisticas.png" />Indicadores
				</a></li>
				<h:panelGroup rendered="#{contextoBean.usuarioLogado.perfil eq 'Administrador'}">
					<li>
						<a><h:graphicImage library="imagens/menu"
										   style="width:35px; height:35px;" name="cadastros.png" />Cadastros</a>
						<ul>
							<li><h:graphicImage library="imagens/menu"
												style="width:30px; height:30px;
								margin-left:10px; margin-top:8px; margin-right:9px;"
												name="circulos.png" /><a
									href="../administrador/circulo.xhtml">Circulos</a>
							</li>

							<li><h:graphicImage library="imagens/menu"
												style="width:30px; height:30px;
								margin-left:10px; margin-top:8px; margin-right:9px;"
												name="palestras.png" /><a
									href="../administrador/palestra.xhtml">Palestras</a>
							</li>
							<li><h:graphicImage library="imagens/menu"
												style="width:30px; height:30px;
								margin-left:10px; margin-top:8px; margin-right:9px;"
												name="equipes.png" /><a
									href="../administrador/equipe.xhtml">Equipes</a>
							</li>
							<li><h:graphicImage library="imagens/menu"
												style="width:30px; height:30px;
								margin-left:10px; margin-top:8px; margin-right:9px;"
												name="usuarios.png" /><a
									href="usuario.xhtml">Usuários</a>
							</li>
						</ul>
					</li>
				</h:panelGroup>
				<li><a><h:graphicImage library="imagens/menu"
									   style="width:35px; height:35px;" name="montagem.png" />Montagem</a>
					<ul>
						<li><h:graphicImage library="imagens/menu"
											style="width:30px; height:30px;
								margin-left:10px; margin-top:8px; margin-right:9px;"
											name="ecc.png" />
							<a href="../dirigente/ecc.xhtml">ECC</a>
						</li>
						<li><h:graphicImage library="imagens/menu"
											style="width:30px; height:30px;
								margin-left:10px; margin-top:8px; margin-right:9px;"
											name="fichas.png" />
							<a href="../dirigente/montagemFicha.xhtml">Fichas</a>
						</li>
						<li><h:graphicImage library="imagens/menu"
											style="width:30px; height:30px;
								margin-left:10px; margin-top:8px; margin-right:9px;"
											name="montagemEquipes.png" />
							<a href="../dirigente/montagemEquipe.xhtml">Equipes</a>
						</li>
						<li><h:graphicImage library="imagens/menu"
											style="width:30px; height:30px;
								margin-left:10px; margin-top:8px; margin-right:9px;"
											name="montagemCasais.png" /><a
								href="../dirigente/montagemEncontrista.xhtml">Encontristas</a>
						</li>
						<li><h:graphicImage library="imagens/menu"
											style="width:30px; height:30px;
								margin-left:10px; margin-top:8px; margin-right:9px;"
											name="montagemPalestrantes.png" />
							<a href="../dirigente/montagemPalestrante.xhtml">Palestrantes</a>
						</li>
						<li><h:graphicImage library="imagens/menu"
											style="width:30px; height:30px;
								margin-left:10px; margin-top:8px; margin-right:9px;"
											name="montagemCirculos.png" />
							<a href="../dirigente/montagemCirculo.xhtml">Círculos</a></li>

					</ul>
				</li>
			</ul>
		</div>
		<div id="status" style="margin-top: 5px;">
			<div id="ico">
				<h1>
					<h:graphicImage library="imagens/menu" name="estatisticas.png"
						width="25px" height="25px" />
					<h5>
						<b>Indicadores</b>
					</h5>
					<p:commandButton type="button" value="Sair" icon="ui-icon-extlink"
						style="float: right; margin-right:5px; margin-top: -5px;"
						onclick="document.location='#{request.contextPath}/j_spring_security_logout'" />
				</h1>
			</div>
			<div id="img-usuario-logado">
				<h5>Usuário logado: #{contextoBean.usuarioLogado.nome}</h5>
				<h1>
					<h:graphicImage library="imagens/menu" name="usuarioLogado.png"
						width="25px" height="25px" />
				</h1>
			</div>
		</div>
		<p:ajaxStatus onstart="PF('statusDialog').show()"
			onsuccess="PF('statusDialog').hide()" />
		<p:growl id="growl" showDetail="false" life="2000" />
		<br />
		<div id="divEstatisticaECCAptidaoAtividades">
			<div id="divEstatisticaECC2">
				<!--
				<div id="divBoxSuperiorGeral">
					<h:panelGrid columns="3">
						<h:graphicImage library="imagens/menu" name="ecc.png"
										style="margin-top:5px;width:30px; height:30px;" />
						<h:panelGroup>
							<h:outputLabel value="Quadro Indicativo"
										   style="font-size:13px; 	font-weight: bold;" />
						</h:panelGroup>
					</h:panelGrid>
				</div>
				-->
				<div id="divEstatisticaECCSuperiorEsquerda">
					<div id="divEstatisticaECCSuperiorEsquerda_01">
						<div class="caixa caixa-azul" style="width: 522px;">
							<h:outputLabel value="Dirigentes"
										   styleClass="negrito" style="font-size:15px;" />
							<p:selectOneMenu id="ecc" value="#{estatisticaBean.eccFiltro}"
											 style="width:105px;margin-left:277px;display: inline-table">
								<f:selectItem itemLabel="TODOS"/>
								<f:selectItems value="#{eccBean.listaEcc}"
											   var="ecc" itemValue="#{ecc.numero}"
											   itemLabel="#{ecc.numero}" />
								<p:ajax listener="#{estatisticaBean.filtraPorEcc()}"
										event="change" update="tabelaECC" />
							</p:selectOneMenu>
							<p:commandLink actionListener="#{estatisticaBean.imprimirEcc}"
										   target="_blank" ajax="false" immediate="true">
								<p:button icon="ui-icon-print" style="margin-left: 5px;" />
							</p:commandLink>
						</div>
					</div>
					<div id="divEstatisticaECCSuperiorEsquerda_02">
						<p:dataTable id="tabelaECC" var="ecc" style="width: 530px; height: 260px;"
									 value="#{estatisticaBean.listaDosEccs}"
									 emptyMessage="Não há ECCs">
							<p:columnGroup type="header">
								<p:row>
									<p:column rowspan="1" headerText="Casal" width="220px;"/>
									<p:column colspan="1" headerText="Equipe" width="195px;" />
								</p:row>
							</p:columnGroup>

							<p:subTable var="dirigentes" value="#{ecc.dirigentes}" rendered="#{ecc.dirigentes.size() > 0}">
								<f:facet name="header">
									<h:panelGrid columns="2" styleClass="semBordaInterna"
												 columnClasses="gridColum01, gridColum02">
										<h:graphicImage library="imagens" name="logoDirigenteMenor.png" />
										<h:outputText
												value="#{ecc.numero} | #{ecc.tema}" />
									</h:panelGrid>
								</f:facet>
								<p:column>
									<h:outputText value="#{dirigentes.ficha.nomeUsual}" />
									<h:graphicImage library="imagens" value="/image?imagem=#{dirigentes.ficha.fotoEla}" rendered="#{dirigentes.ficha.fotoEla.length() > 0}"
													style="width:20px; height:20px; float: right;" title="Foto dela"/>
									<h:graphicImage library="imagens" value="/image?imagem=#{dirigentes.ficha.fotoEle}" rendered="#{dirigentes.ficha.fotoEle.length() > 0}"
													style="width:20px; height:20px; float: right;" title="Foto dele"/>
								</p:column>
								<p:column style="text-align:left">
									<h:outputText value="#{dirigentes.equipe.descricao}" />
								</p:column>
								<p:columnGroup type="footer">
									<p:row>
										<p:column footerText="Total: "
												  style="text-align:right; background-color:#adc2eb;" />
										<p:column footerText="#{ecc.dirigentes.size()}"
												  style="text-align:right; background-color:#adc2eb;" />
									</p:row>
								</p:columnGroup>
							</p:subTable>
						</p:dataTable>
					</div>
				</div>
			</div>
			<!-- DIV ENCONTREIROS E ENCONTRISTAS -->
			<div id="divEstatisticaEncontreiroEncontrista">
				<div class="info-box" style="width: 130px; height: 60px;">
					<span class="info-box-icon bg-aqua">
						<h:graphicImage library="imagens"
										style="width:35px; height:35px;" name="encontreiro.png" title="Encontreiros"/>
					</span>
					<div class="info-box-content">
						<!--
						<span class="info-box-text"><b><font size="3px">ENCONTREIROS</font></b></span>
						-->
						<span class="info-box-number">
              				#{estatisticaBean.numeroEncontreiros}
              			</span>
					</div>
				</div>
				<div class="info-box" style="width: 130px;">
						<span class="info-box-icon bg-yellow">
							<h:graphicImage library="imagens"
											style="width:35px; height:35px;" name="encontrista.png" title="Encontristas"/>
						</span>
					<div class="info-box-content">
						<span class="info-box-number">
								#{estatisticaBean.numeroEncontristas}
							</span>
					</div>
				</div>
			</div>
			<!-- DIV APTIDÕES -->
			<div id="divEstatisticaAptidaoSuperiorDireita">
					<div id="divEstatisticaAptiaoDireita_01">
						<div class="caixa caixa-laranja" style="width: 320px;">
							<p:selectOneMenu id="aptidao" value="#{estatisticaBean.aptidaoFiltro}"
											 style="width:250px;margin-left:5px;display: inline-table">
								<f:selectItem itemLabel="TODAS"/>
								<f:selectItems value="#{equipeBean.lista}"
											   var="aptidao" itemValue="#{aptidao.descricao}"
											   itemLabel="#{aptidao.descricao}" />
								<p:ajax listener="#{estatisticaBean.filtraPorAptidao()}"
										event="change" update="tabelaAptidoes" />
							</p:selectOneMenu>
							<p:commandLink actionListener="#{estatisticaBean.imprimirEcc}"
										   target="_blank" ajax="false" immediate="true">
								<p:button icon="ui-icon-print" style="margin-left: 5px;" />
							</p:commandLink>
						</div>
					</div>
					<div id="divBoxAptidao">
						<h:panelGrid columns="3">
							<h:panelGroup>
								<h:outputLabel value="Aptidão" style="font-size:15px; color: #737373" />
								<br />
								<h:outputLabel value="Total de Casais por Aptidão"
											   styleClass="negrito" style="font-size:15px;" />
							</h:panelGroup>
						</h:panelGrid>
					<div id="divDadosAptidao">
						<h:panelGroup id="tabelaAptidoes">
							<c:forEach items="#{estatisticaBean.listaDasAptidoes}"
									   var="result" varStatus="count">
								<div id="divLista_02">
									<p:outputLabel value="#{result.aptidao}" styleClass="negrito" />
								</div>
								<div id="divLista_03">
									<p:outputLabel value="#{result.quantidade}" />
								</div>
								<div id="limpa" />
								<hr	style="border: 1px; border-top: 1px solid #ccc; margin-left: 10px; width: 94%" />
							</c:forEach>
						</h:panelGroup>
					</div>
				</div>
			</div>
			<!-- DIV ATIVIDADES -->
			<div id="divEstatisticaAtividadeEncontristaEquipeSuperiorDireita">
				<div id="divEstatisticaAtividadeEncontristaEquipeSuperiorDireita_01">
					<div class="caixa caixa-verde" style="width: 320px;">
						<p:selectOneMenu id="atividade" value="#{estatisticaBean.atividadeFiltro}"
										 style="width:250px;margin-left:5px;display: inline-table">
							<f:selectItem itemLabel="TODAS"/>
							<f:selectItems value="#{equipeBean.lista}"
										   var="atividade" itemValue="#{atividade.descricao}"
										   itemLabel="#{atividade.descricao}" />
							<p:ajax listener="#{estatisticaBean.filtraPorAtividade()}"
									event="change" update="tabelaAtividades" />
						</p:selectOneMenu>
						<p:commandLink actionListener="#{estatisticaBean.imprimirEcc}"
									   target="_blank" ajax="false" immediate="true">
							<p:button icon="ui-icon-print" style="margin-left: 5px;" />
						</p:commandLink>
					</div>
					<div id="divBoxAtividade">
						<h:panelGrid columns="3">
							<h:panelGroup>
								<h:outputLabel value="Atividade" style="font-size:15px; color: #737373" />
								<br />
								<h:outputLabel value="Total de Casais por Atividade"
											   styleClass="negrito" style="font-size:15px;" />
							</h:panelGroup>
						</h:panelGrid>
						<div id="divDadosAtividade">
							<h:panelGroup id="tabelaAtividades">
								<c:forEach items="#{estatisticaBean.listaDasAtividades}"
										   var="result" varStatus="count">
									<div id="divLista_02">
										<p:outputLabel value="#{result.atividade}" styleClass="negrito" />
									</div>
									<div id="divLista_03">
										<p:outputLabel value="#{result.quantidade}" />
									</div>
									<div id="limpa" />
									<hr	style="border: 1px; border-top: 1px solid #ccc; margin-left: 10px; width: 94%" />
								</c:forEach>
							</h:panelGroup>
						</div>
					</div>
				</div>
				<!--
			</div>
			-->
		</div>
	</div>
	<div id="divEstatisticaChefeForaInferior">
		<div id="divEstatisticaChefeInferiorEsquerda">
			<!-- DIV ENCONTRISTAS/CÍRCULOS -->
				<div id="divEstatisticaChefeInferiorEsquerda_01">
					<div class="caixa caixa-azul" style="width: 522px;">
						<h:outputLabel value="Encontristas/Círculos"
									   styleClass="negrito" style="font-size:15px;" />
							<p:selectOneMenu id="ecc1" value="#{estatisticaBean.eccFiltro}"
										 style="width:105px;margin-left:196px;display: inline-table">
							<f:selectItem itemLabel="TODOS"/>
							<f:selectItems value="#{eccBean.listaEcc}"
										   var="ecc" itemValue="#{ecc.numero}"
										   itemLabel="#{ecc.numero}" />
								<p:ajax listener="#{estatisticaBean.filtraPorEncontristasCirculos()}"
									event="change" update="tabelaEncontristasCirculos" />
						</p:selectOneMenu>
						<p:commandLink actionListener="#{estatisticaBean.imprimirEcc}"
									   target="_blank" ajax="false" immediate="true">
							<p:button icon="ui-icon-print" style="margin-left: 5px;" />
						</p:commandLink>
					</div>
				</div>
				<div id="divEstatisticaChefeInferiorEsquerda_02">
					<p:dataTable id="tabelaEncontristasCirculos" var="circulo" style="width: 530px; height: 260px;"
								 value="#{estatisticaBean.listaDosCirculos}"
								 emptyMessage="Não há Encontristas/Círculos">
						<p:columnGroup type="header">
							<p:row>
								<p:column rowspan="1" headerText="Encontristas/Círculos" width="470px;"/>
							</p:row>
						</p:columnGroup>
						<p:subTable var="encontristas" value="#{circulo.circulosEccCasais}" rendered="#{circulo.circulosEccCasais.size() > 0}">
							<f:facet name="header">
								<h:panelGrid columns="4" styleClass="semBordaInterna"
											 columnClasses="gridColum01, gridColum02">
									<h:graphicImage library="imagens" name="green.png" width="15" height="15" rendered="#{circulo.circulo.descricao eq 'VERDE'}"
													style="float: right;" title="Verde"/>
									<h:graphicImage library="imagens" name="red.png" width="15" height="15" rendered="#{circulo.circulo.descricao eq 'VERMELHO'}"
													style="float: right;" title="Vermelho"/>
									<h:graphicImage library="imagens" name="blue.png" width="15" height="15" rendered="#{circulo.circulo.descricao eq 'AZUL'}"
													style="float: right;" title="Azul"/>
									<h:graphicImage library="imagens" name="yellow.png" width="15" height="15" rendered="#{circulo.circulo.descricao eq 'AMARELO'}"
													style="float: right;" title="Amarelo"/>
									<h:graphicImage library="imagens" name="pink.png" width="15" height="15" rendered="#{circulo.circulo.descricao eq 'ROSA'}"
													style="float: right;" title="Rosa"/>
									<h:graphicImage library="imagens" name="orange.png" width="15" height="15" rendered="#{circulo.circulo.descricao eq 'LARANJA'}"
													style="float: right;" title="Laranja"/>
									<h:outputText
											value="#{circulo.casalCoordenador.nomeUsual}" />
									<h:graphicImage library="imagens" value="/image?imagem=#{circulo.casalCoordenador.fotoEle}" rendered="#{circulo.casalCoordenador.fotoEle.length() > 0}"
													style="width:20px; height:20px; float: right;" title="Foto dele"/>
									<h:graphicImage library="imagens" value="/image?imagem=#{circulo.casalCoordenador.fotoEla}" rendered="#{circulo.casalCoordenador.fotoEla.length() > 0}"
													style="width:20px; height:20px; float: left;" title="Foto dela"/>

								</h:panelGrid>
							</f:facet>
							<p:column>
								<h:outputText value="#{encontristas.ficha.nomeUsual}" />
								<h:graphicImage library="imagens" value="/image?imagem=#{encontristas.ficha.fotoEla}" rendered="#{encontristas.ficha.fotoEla.length() > 0}"
												style="width:20px; height:20px; float: right;" title="Foto dela"/>
								<h:graphicImage library="imagens" value="/image?imagem=#{encontristas.ficha.fotoEle}" rendered="#{encontristas.ficha.fotoEle.length() > 0}"
												style="width:20px; height:20px; float: right;" title="Foto dele"/>
							</p:column>
							<p:columnGroup type="footer">
								<p:row>
									<p:column footerText="Total: #{circulo.circulosEccCasais.size()}"
											  style="text-align:right; background-color:#adc2eb;" />
								</p:row>
							</p:columnGroup>
						</p:subTable>
					</p:dataTable>
				</div>
		</div>
<!--
AQUI
-->
		<!-- DIV EQUIPES -->
		<div id="divEstatisticaChefeInferiorDireita">
			<div class="caixa caixa-vermelha" style="width: 520px;">
				<h:outputLabel value="Equipes"
							   styleClass="negrito" style="font-size:15px;" />
				<p:selectOneMenu id="ecc2" value="#{estatisticaBean.eccFiltro}"
								 style="width:105px;margin-left:260px;display: inline-table">
					<f:selectItem itemLabel="TODOS"/>
					<f:selectItems value="#{eccBean.listaEcc}"
								   var="ecc" itemValue="#{ecc.numero}"
								   itemLabel="#{ecc.numero}" />
					<p:ajax listener="#{estatisticaBean.filtraPorEquipes()}"
							event="change" update="tabelaEquipes" />
				</p:selectOneMenu>
				<p:commandLink actionListener="#{estatisticaBean.imprimirEcc}"
							   target="_blank" ajax="false" immediate="true">
					<p:button icon="ui-icon-print" style="margin-left: 5px;" />
				</p:commandLink>
			</div>
		</div>
		<div id="divEstatisticaChefeInferiorDireita_01">
			<p:dataTable id="tabelaEquipes" var="equipe"
						 value="#{estatisticaBean.listaDasEquipes}"
						 emptyMessage="Não há Equipes">
				<p:columnGroup type="header">
					<p:row>
						<p:column rowspan="1" headerText="Equipes" width="470px;"/>
					</p:row>
				</p:columnGroup>
				<p:subTable var="equipeCasais" value="#{equipe.equipesEccCasais}" rendered="#{equipe.equipesEccCasais.size() > 0}">
					<f:facet name="header">
						<h:panelGrid columns="3" styleClass="semBordaInterna"
									 columnClasses="gridColum01 gridColum02 gridColum02">
							<h:outputText
									value="#{equipe.equipe.descricao} | #{equipe.casalCoordenador.nomeUsual}" />
							<h:graphicImage library="imagens" value="/image?imagem=#{equipe.casalCoordenador.fotoEle}" rendered="#{equipe.casalCoordenador.fotoEle.length() > 0}"
											style="width:20px; height:20px; float: right;" title="Foto dela"/>
							<h:graphicImage library="imagens" value="/image?imagem=#{equipe.casalCoordenador.fotoEla}" rendered="#{equipe.casalCoordenador.fotoEla.length() > 0}"
											style="width:20px; height:20px; float: left;" title="Foto dela"/>

						</h:panelGrid>
					</f:facet>
					<p:column>
						<h:outputText value="#{equipeCasais.ficha.nomeUsual}" />
						<h:graphicImage library="imagens" value="/image?imagem=#{equipeCasais.ficha.fotoEla}" rendered="#{equipeCasais.ficha.fotoEla.length() > 0}"
										style="width:20px; height:20px; float: right;" title="Foto dela"/>
						<h:graphicImage library="imagens" value="/image?imagem=#{equipeCasais.ficha.fotoEle}" rendered="#{equipeCasais.ficha.fotoEle.length() > 0}"
										style="width:20px; height:20px; float: right;" title="Foto dele"/>
					</p:column>
					<p:columnGroup type="footer">
						<p:row>
							<p:column footerText="Total: #{equipe.equipesEccCasais.size()}"
									  style="text-align:right; background-color:#adc2eb;" />
						</p:row>
					</p:columnGroup>
				</p:subTable>
			</p:dataTable>
		</div>

	</div>


	</h:form>
	<p:dialog widgetVar="statusDialog" modal="true" draggable="false"
			  closable="false" resizable="false" showHeader="false" width="250px">
		<div id="divLoadingFora">
			<div id="divLoadingEsquerda">
				<h:graphicImage library="imagens" name="SLG.ico" width="60" height="60" />
			</div>
			<div id="divLoadingDireita">
				<h:outputLabel value="Processando..." />
				<h:graphicImage library="imagens" name="barra.gif" />
			</div>
		</div>
	</p:dialog>
</h:body>
</html>